2011-02-11  Jose E. Marchesi  <jemarch@gnu.org>

	Translations updated.
	* po/de.po: Updated from the translation project.
	* po/fi.po: Likewise.
	* po/nl.po: Likewise.
	* po/sv.po: Likewise.

2011-02-09  Jose E. Marchesi  <jemarch@gnu.org>

	Documentation for %size.
	* doc/recutils.texi (Record Descriptors): Documentation of the
	%size special field.

2011-02-09  Jose E. Marchesi  <jemarch@gnu.org>

	Tests for the %size special field.
	* torture/utils/recfix.sh: New input files size-invalid-1,
	size-invalid-2, size-exact-zero, size-exact-zero-invalid,
	size-exact, size-exact-invalid, size-less, size-less-invalid,
	size-less-equal, size-less-equal-invalid, size-bigger,
	size-bigger-invalid, size-bigger-equal and
	size-bigger-equal-invalid.
	(recfix-size-invalid-1): New test.
	(recfix-size-invalid-2): New test.
	(recfix-size-exact-zero): New test.
	(recfix-size-exact-zero-invalid): New test.
	(recfix-size-exact): New test.
	(recfix-size-exact-invalid): New test.
	(recfix-size-less): New test.
	(recfix-size-less-invalid): New test.
	(recfix-size-less-equal): New test.
	(recfix-size-less-equal-invalid): New test.
	(recfix-size-bigger): New test.
	(recfix-size-bigger-invalid): New test.
	(recfix-size-bigger-equal): New test.
	(recfix-size-bigger-equal-invalid): New test.

2011-02-08  Jose E. Marchesi  <jemarch@gnu.org>

	portability fix for macos x.
	* torture/rec-type/rec-type-descr-type.c: Include stdlib.h for
	malloc, not malloc.h.  Macos X does not provide malloc.h

2011-02-08  Jose E. Marchesi  <jemarch@gnu.org>

	manual: several texinfo fixes and improvements.
	* doc/recutils.texi: Use @dots{}.
	Use @: after i.e. and e.g. to avoid texinfo to insert double
	spacing.
	(recfmt Examples): Fix incomplete statement.
	Use @var{} for all the parameters in synopsis.

2011-02-08  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix typos and nits in the manual.
	* doc/recutils.texi (Introduction, Record Descriptors)
	(SEX Operands, recsel Invocation, recset Invocation)
	(recfix Examples, recfmt Templates, rec2csv Conversion):
	Fix typos, add a few @noindent's.

2011-02-08  Jose E. Marchesi  <jemarch@gnu.org>

	warnings fixed in the codebase.
	* src/rec-utils.c (rec_extract_size): Cast the second argument to
	rec_parse_int from size_t* to int*.

	* src/rec-rset.c (rec_rset_update_size_constraints): Unused
	variable record_elem removed.
	(rec_rset_source): Unused variable rset_elem removed.

	* src/rec-int.c (rec_int_merge_remote): Return 0.
	(rec_int_check_descriptor): Unused variables size_max, size_min,
	size and invalid_sizes removed.

	* utils/recins.c (recins_add_new_record): Unused variables
	errors_str_size, errors_str and errors_buf removed.
	(recins_add_auto_field_int): Unused variable new_field removed.

	* utils/recdel.c (recdel_delete_records): Unused variable
	'errors_buf' removed.

	* utils/recfmt.c (recfmt_apply_template): Unused variable 'n'
	removed.

	* utils/rec2csv.c (rec2csv_generate_csv): Unused variable
	'field_index' removed.

	* utils/mdb2rec.c (get_field_name): Unused variables field_part_0,
	field_part_1 and field_part_2 removed.
	(process_table): Unused variable j removed.
	(process_mdb): Unused variables 'in' and 'rset' removed.
	(main): Set 'ret' to success or failure.

	* torture/rec-type-reg/rec-type-reg-get.c (START_TEST): Unused
	variable 'type' removed.

	* torture/rec-parser/rec-parse-db.c (START_TEST): Unused variable
	stm removed.

	* torture/rec-parser/rec-parser-eof.c (START_TEST): Unused
	variable ci removed.

2011-02-07  Jose E. Marchesi  <jemarch@gnu.org>

	List of ignored files updated.
	* .gitignore: Ignore generated po/*mo files.
	Ignore the doc/manual directory.

2011-02-07  Jose E. Marchesi  <jemarch@gnu.org>

	librec: implementation of the %size field.
	* src/rec-rset.c (rec_rset_min_records): New function.
	(rec_rset_max_records): New function.
	(rec_rset_source): New function.

	* src/rec-int.c (rec_int_check_rset): Verify the size restrictions
	of the record set.

	* src/rec-utils.c (rec_extract_size): New function.
	(rec_extract_size_condition): Likewise.

	* src/rec-rset.c (rec_rset_update_size_constraints): New function.

	* src/rec-utils.c (rec_match): New function.

	* src/rec-rset.c (struct rec_rset_s): New fields min_size and
	max_size.
	(rec_rset_new): Initialize rset->size_min and rset->size_max.
	(rec_rset_set_descriptor): Update size constraints.
	(rec_rset_update_size_constraints): New function.
	Include stdint.h for SIZE_MAX.

	* src/rec-int.c (rec_int_check_descriptor): Check for the validity
	of values of %size fields.

2011-02-07  Jose E. Marchesi  <jemarch@gnu.org>

	librec: problem with non initialized variable fixed.
	* src/rec-int.c (rec_int_check_descriptor): Initialize 'res' to 0.

2011-02-04  Jose E. Marchesi  <jemarch@gnu.org>

	Preparation for 1.2.
	* NEWS: Updated for 1.2.

	* configure.ac: Version changed from 1.1.90 to 1.2.

2011-02-04  Jose E. Marchesi  <jemarch@gnu.org>

	Translations for German, Swedish, Finnish and Ducht.
	* po/de.po: New file from the FTP.
	* po/sv.po: Likewise.
	* po/nl.po: Likewise.
	* po/fi.po: Likewise.

	* po/LINGUAS: New file.

2011-02-04  Jose E. Marchesi  <jemarch@gnu.org>

	manual: some examples fixed.
	* doc/recutils.texi (Escalar types): Fix example.
	(Enumerated types): Likewise.

2011-02-02  Jose E. Marchesi  <jemarch@gnu.org>

	Preparation for 1.1.90.
	* .x-sc_prohibit_strcmp: Added torture/*.

	* .x-sc_prohibit_stddef_without_use: New file.

	* po/recutils.pot: Updated for 1.1.90.

	* NEWS: Updated for 1.1.90.

	* configure.ac: Version changed to 1.1.90.

2011-02-02  Jose E. Marchesi  <jemarch@gnu.org>

	rec2csv: documentation.
	* doc/recutils.texi (rec2csv): New section.
	(rec2csv Invocation): New section.
	(rec2csv Examples): New section.
	(rec2csv Conversion): New section.

2011-02-02  Jose E. Marchesi  <jemarch@gnu.org>

	rec2csv: tests.
	* torture/utils/Makefile.am (TESTS): rec2csv added.

	* torture/utils/rec2csv.sh: New file.  New input files
	'default-records', 'missing-fields', 'missing-fields-first',
	'multi-line', 'escape-quotes', 'repeated-fields',
	'repeated-missing' and 'several-types'.
	(rec2csv-default-record): New test.
	(rec2csv-missing-fields): New test.
	(rec2csv-missing-fields-first): New test.
	(rec2csv-multi-line): New test.
	(rec2csv-escape-quotes): New test.
	(rec2csv-repeated-fields): New test.
	(rec2csv-repeated-missing): New test.
	(rec2csv-default-type): New test.
	(rec2csv-with-type): New test.
	(rec2csv-nonexistent-type): New test.

2011-02-02  Jose E. Marchesi  <jemarch@gnu.org>

	rec2csv: print data.
	* utils/rec2csv.c (rec2csv_process_data): Process either the
	specified record rset, or the default one, or the only rset
	existing in the file.

2011-02-02  Jose E. Marchesi  <jemarch@gnu.org>

	rec2csv: print headers.
	* utils/rec2csv.c (rec2csv_determine_fields): New function.
	* utils/rec2csv.c (rec2csv_generate_csv): Likewise.

	* src/rec-fex.c (rec_fex_member_p): Get arguments 'min' and 'max'.
	* src/rec-rset.c (rec_rset_update_auto_fields): Use the additional
	parameters of rec_fex_member_p.

2011-01-31  Jose E. Marchesi  <jemarch@gnu.org>

	rec2csv: skeleton of the utility.
	* man/Makefile.am (man_MANS): rec2csv.1 added.
	(rec2csv.1): New rule.

	* utils/Makefile.am (bin_PROGRAMS): rec2csv added.
	(rec2csv_SOURCES): Defined.
	(rec2csv_LDADD): Defined.

	* utils/rec2csv.c: New file.
	(recutl_print_help): New function.
	(parse_args): Likewise.
	(rec2csv_process_data): Likewise.
	(main): Likewise.

2011-01-30  Jose E. Marchesi  <jemarch@gnu.org>

	recins: prepend the auto-generated fields.
	* torture/utils/recins.sh: Tests adapted.

	* utils/recins.c (recins_add_auto_field_int): Prepend the
	auto-generated field instead of appending it.
	(recins_add_auto_field_date): Likewise.

2011-01-30  Jose E. Marchesi  <jemarch@gnu.org>

	Documentation for the auto generated fields.
	* doc/recutils.texi (Record Descriptors): List %auto in the list
	of allowed special fields.
	(recins Invocation): Document --no-auto.
	(Auto Generated Fields): auto-generated fields documentation.

2011-01-30  Jose E. Marchesi  <jemarch@gnu.org>

	Tests for the auto generated fields.
	* torture/utils/recins.sh: New input files auto-fields and
	auto-range-overflow.
	(recins-auto-fields): New test.
	(recins-no-auto): New test.
	(recins-auto-range-overflow): New test.
	(recins-auto-range-overflow-force): New test.

	* torture/utils/recfix.sh: New input files auto-int, auto-range,
	auto-date, auto-notype and auto-nofex.
	(recfix-auto-int): New test.
	(recfix-auto-range): New test.
	(recfix-auto-date): New test.
	(recfix-auto-notype): New test.
	(recfix-auto-nofex): New test.

2011-01-30  Jose E. Marchesi  <jemarch@gnu.org>

	Implementation of auto generated fields.
	* utils/recins.c: New argument --no-auto.

	* src/rec-types.c (rec_type_min): New function.
	(rec_type_max): New function.

	* src/rec.h: New function rec_rset_get_field_type.

	* utils/recins.c (recins_add_new_record): Add auto-set fields when
	replacing a record.
	(recins_insert_record): Likewise.
	(recins_add_auto_fields): New function.
	(recins_add_auto_field_int): New function.
	(recins_add_auto_field_date): New function.

	* torture/rec-fex/rec-fex-new.c: Adapt tests to the new semantics
	of rec_fex_new (NULL,...).

	* src/rec.h: New functions rec_fex_append and rec_fex_member_p.
	* src/rec-fex.c (rec_fex_append): Implemented.
	(rec_fex_member_p): Implemented.
	(rec_fex_new): Create an empty FEX if the str parameter is NULL.

	* src/rec-rset.c (struct rec_rset_s): New 'auto_fields' member.
	(rec_rset_new): Initialize 'auto_fields'.
	(rec_rset_set_descriptor): Call rec_rset_update_auto_fields.
	(rec_rset_update_auto_fields): New function.
	(rec_rset_auto): New function.

	* src/rec.h: New function rec_rset_auto, that returns a list with
	the names of the auto-set fields in the rset.

	* src/rec-int.c (rec_int_check_descriptor): Check that
	auto-incremented fields are of type int.

2011-01-29  Jose E. Marchesi  <jemarch@gnu.org>

	utils: recdel now performs an integrity check of the resulting
	database.
	* doc/recutils.texi (recdel Invocation): Documentation for
	'--force' and '--verbose'.
	(recins Invocation): Likewise.
	(recset Invocation): Likewise.

	* torture/utils/recdel.sh: New input file 'integrity-fail'.
	New input file 'external-types'.
	New input file 'external'.
	(recdel-integrity-fail): New test.
	(recdel-force-restrictions): New test.
	(recdel-external-fail): New test.
	(recdel-no-external): New test.

	* utils/recins.c (recins_add_new_record): Use
	recutl_check_integrity.

	* utils/recdel.c: New parameter --verbose.
	New parameter --no-external.

	* utils/recutl.h: New function 'recutl_check_integrity'.
	* uitls/recutl.c: Likewise.

2011-01-29  Jose E. Marchesi  <jemarch@gnu.org>

	utils: fix the output of integrity error messages.
	* utils/recins.c (recins_add_new_record): Dont use recutl_error to
	report the integrity errors.
	* utils/recset.c (recset_process_actions): Likewise.

2011-01-29  Jose E. Marchesi  <jemarch@gnu.org>

	librec: manage problems with the remote descriptors as integrity
	errors.
	* src/rec-int.c (rec_int_check_descriptor): Call
	rec_int_merge_remote.
	(rec_int_merge_remote): Return 1 if there is an error fetching the
	remote descriptor.  0 otherwise.
	(rec_int_merge_remote): Get an errors parameter.
	(rec_int_merge_remote): Manage errors as integrity errors.

2011-01-28  Jose E. Marchesi  <jemarch@gnu.org>

	librec: avoid descriptor expansion when using remote descriptors.
	* src/rec-int.c (rec_int_check_rset): Save a backup of the
	rset descriptor before to merge any remote descriptor, and restore
	it before returning.

	* torture/utils/recins.sh: New input files external-descriptor and
	external-descriptor-types.
	(recins-external-descriptor): New test.

2011-01-25  Jose E. Marchesi  <jemarch@gnu.org>

	manual: Fix the description of %unique, %prohibit, %mandatory,
	%url and %type.
	* doc/recutils.texi (Record Descriptors): Fix the documentation of
	%prohibit, %mandatory and %unique so it says that the field names
	are separated by blanks.
	(Record Descriptors): Note that %url can be followed by an URL or
	a file path.
	(Record Descriptors): Clarify that the list of field names in
	%type shall be separated by commas.

	Problems reported by Jean-François Ollier.

2011-01-24  Jose E. Marchesi  <jemarch@gnu.org>

	manual: document the supported regexp flavor.
	* doc/recutils.texi (Regular Expressions): New chapter.
	(String types): Clarify the supported regexp flavor.
	(Field Values): Likewise.

2011-01-24  Jose E. Marchesi  <jemarch@gnu.org>

	gnulib: update and import regexprops-generic.
	* doc/regexprops-generic.texi: New file.

	* lib/iswblank.c: New file.

2011-01-23  Jose E. Marchesi  <jemarch@gnu.org>

	recutl: make recset and recins to keep the permissions of the
	operated rec file.
	* utils/recutl.c (recutl_write_db_to_file): New variables st1 and
	stat_result.
	(recutl_write_db_to_file): Record the file attributes of the
	original rec file and use its mode in the replace file.
	Copyright updated.

	Problem reported, and solution outlined by Jean-François Ollier.

2011-01-23  Jose E. Marchesi  <jemarch@gnu.org>

	torture: tests checking the %prohibit restriction.
	* torture/utils/recfix.sh: New input files prohibited-fields and
	prohibited-fields-fail.
	(recfix-prohibited-fields-ok): New test.
	(recfix-prohibited-fields-fail): New test.

2011-01-22  Jose E. Marchesi  <jemarch@gnu.org>

	Use Task instead of Issue in examples involving TODO.
	* doc/recutils.texi (recsel Examples): Issue replaced by Task.
	(recins Examples): Likewise.
	(recdel Examples): Likewise.
	* utils/recinf.c (recutl_print_help): Likewise.

2011-01-14  Jose E. Marchesi  <jemarch@gnu.org>

	tasktool: use --set-add.
	* tasktool (tt_process_cmd_resolve): Use the --set-add option of
	tasktool to insert the ClosedAt field when resolving to DONE.

2011-01-14 Jose E. Marchesi <jemarch@gnu.org>

	Tasktool operations.
	* TODO: Task 29 resolved to 'DONE'.
	Task 29 resolved to 'DONE'.

2011-01-12  Jose E. Marchesi  <jemarch@gnu.org>

	reset: support for the set-add operation.
	* doc/recutils.texi (recset Invocation): Documentation for the -S,
	--set-add command line option.

	* torture/utils/recset.sh (recset-set-add-1): New test.
	(recset-set-add-2): New test.
	(recset-set-add-3): New test.

	* utils/recset.c (RECSET_ACT_SET_ADD): New action.
	(COMMON_ARGS): SET_ADD_ACTION_ARG added.
	(recutl_print_help): Document -S, --set-add.
	(recset_parse_args): Manage the set-add option.
	(recset_process_actions): Likewise.
	(recset_process_set): New parameter 'add_p' that tells whether to
	add missing fields with the given value.
	(CHECK_ACTION_PREREQ): New macro.
	(recset_parse_args): Use CHECK_ACTION_PREREQ to avoid code
	repetition.

2011-01-10  Jose E. Marchesi  <jemarch@gnu.org>

	TODO: put a comment at the beginning asking to execute ./tasktool
	--help.
	* tasktool (tt_db_template_header): Modified to include a note
	about executing ./tasktool --help.

	* TODO: Likewise.

2011-01-10  Jose E. Marchesi  <jemarch@gnu.org>

	librec: support for comments in enum descriptions.
	* doc/recutils.texi (Enumerated types): Comments in enum
	descriptions documented.
	Copyright updated.

	* torture/utils/recfix.sh: New input file 'enum-valid'.
	New input file 'enum-invalid-1'.
	New input file 'enum-invalid-2'.
	(recfix-enum-valid): New test.
	(recfix-enum-invalid-1): New test.
	(recfix-enum-invalid-2): New test.

	* src/rec-types.c (rec_type_parse_enum): Skip comments in
	enum descriptions.

2010-12-23  Jose E. Marchesi  <jemarch@gnu.org>

	Preparation for 1.1.
	* .x-sc_prohibit_have_config_h: New file.

	* po/POTFILES.in: Updated.

	* m4/pkg.m4: Relicense from GPLv2+ to GPLv3+.

	* NEWS: Updated to version 1.1.

	* man/Makefile.am (man_MANS): recfmt.1 added.
	(recfmt.1): New rule.

	* configure.ac: Package version changed to 1.1.

2010-12-23  Jose E. Marchesi  <jemarch@gnu.org>

	rec-sex: support for the string concatenation operator.
	* doc/recutils.texi (SEX Operators): Documentation for the string
	concatenation operator.

	* src/rec-sex.c (rec_sex_eval_node): Manage REC_SEX_OP_CONCAT.

	* src/rec-sex-ast.h: New operation REC_SEX_OP_CONCAT.

	* src/rec-sex-tab.y: Declare REC_SEX_TOK_AMP as a token.

	* src/rec-sex-lex.l: Recognize REC_SEX_TOK_AMP.

2010-12-23  Jose E. Marchesi  <jemarch@gnu.org>

	rec-sex: support for the conditional expression.
	* doc/recutils.texi (SEX Operators): Documentation for the ternary
	conditional operator added.

	* src/rec-sex.c (rec_sex_eval_node): Manage REC_SEX_OP_COND.

	* src/rec-sex-tab.y (CREATE_NODE_OP3): Macro defined.

	* src/rec-sex-ast.h: New operation REC_SEX_OP_COND.

	* src/rec-sex-tab.y: Declare REC_SEX_TOK_QM and REC_SEX_TOK_COLON
	as tokens.

	* src/rec-sex-lex.l: Recognize REC_SEX_TOK_QM and
	REC_SEX_TOK_COLON.

2010-12-23  Jose E. Marchesi  <jemarch@gnu.org>

	manual: first draft of the documentation for recfmt.
	* doc/recutils.texi (recfmt): New chapter.
	(recfmt Invocation): New section.
	(recfmt Templates): New section.
	(recfmt Examples): New section.

2010-12-23  Jose E. Marchesi  <jemarch@gnu.org>

	recfmt: use SEX expressions in template slots and change the slot
	format.
	* src/rec-sex.c (rec_sex_compile): Set the parser ast only if the
	parsing was successful.

	* src/rec-sex-tab.y (exp): Grammar changed to require an
	expression.

	* src/rec-sex.c (rec_sex_eval_str): New function.

	* utils/recfmt.c (recfmt_apply_template): Use {{...}} marks
	instead of <#...>.
	(recfmt_get_subst): New function.

2010-12-22  Jose E. Marchesi  <jemarch@gnu.org>

	recfmt: initial version.
	* torture/utils/Makefile.am (TESTS): recfmt.sh added.

	* torture/utils/recfmt.sh: New file.
	(recfmt-empty-template): New test.
	(recfmt-empty-file): New test.
	(recfmt-all-records): New test.
	(recfmt-slot-beginning): New test.
	(recfmt-no-prolog): New test.
	(recfmt-subscripts): New test.
	(recfmt-non-matching-records): New test.
	(recfmt-empty-slot): New test.
	(recfmt-invalid-slot): New test.

	* src/rec-record.c (rec_record_get_field_by_name): Return NULL if
	the specified field is not found, instead of the last field of the
	record.

	* utils/recutl.h: New function recutl_warning.
	New function recutl_read_file.
	* utils/recutl.c (recutl_warning): Implemented.
	(recutl_read_file): Implemented.

	* utils/recfmt.c (recfmt_process_db): New function.
	(rec_fmt_apply_template): New function.

	* utils/Makefile.am (bin_PROGRAMS): recfmt added.

	* utils/recfmt.c: New file.
	(recutl_print_help): New function.
	(recfmt_parse_args): New function.
	(main): New function.

2010-12-22  Jose E. Marchesi  <jemarch@gnu.org>

	torture: manage errors when running the utilities in the system
	tests.
	* torture/utils/testutils.sh: Make the tests to fail if there is
	an error running a system test.

2010-12-21  Jose E. Marchesi  <jemarch@gnu.org>

	Portability fixes.
	* torture/utils/testutils.sh: Use the portable 'expr' instead of
	'bc'.

	* src/Makefile.am (AM_CFLAGS): gcc specific options -Wall and
	-fno-strict-aliasing removed.

	* utils/recutl.h: Include progname.h so the declaration of
	program_name is accessible in all the utilities.

	* utils/csv2rec.c: program_name global variable removed.
	* utils/recset.c: Likewise.
	* utils/recsel.c: Likewise.
	* utils/recins.c: Likewise.
	* utils/recinf.c: Likewise.
	* utils/recfix.c: Likewise.
	* utils/recdel.c: Likewise.
	* utils/mdb2rec.c: Likewise.

	* utils/recutl.c: Include progname.h and use set_progname.

	* module 'progname' imported from gnulib.

	* src/rec.c: Remove the setting of a program_name variable when
	compiling with mingw.

	* src/rec-sex.c (ATOTS_VAL): Use parse_datetime instead of
	get_date.
	Include parse-datetime.h instead of getdate.h.
	* src/rec-types.c: Likewise.

	* po/Makevars.template: Removed.

	* README-dev: libcsv dependency removed.
	Added a note asking for a recent version of flex.

	* m4/pkg.m4: Copied from /usr/share/aclocal/pkg.m4.

2010-12-20  Jose E. Marchesi  <jemarch@gnu.org>

	Build a librec.dll in mingw.
	* src/Makefile.am (AM_LDFLAGS): Use -no-undefined.

	* src/rec.c: Avoid an undefined symbol in the generated
	librec.dll.

2010-12-20  Jose E. Marchesi  <jemarch@gnu.org>

	Fix compilation in mingw32.
	* src/rec-sex-lex.l: Use %top to get config.h included at the top
	of the generated file.

	* strsep module imported from gnulib.
	* mkdstemp module imported from gnulib.

2010-12-20  Jose E. Marchesi  <jemarch@gnu.org>

	echo -n is not recognized in macosx.  Use printf instead.
	* torture/utils/testutils.sh (test_declare_input_file): Use printf
	instead of echo -n.
	(test_tool): Likewise.
	* tasktool (tt_email_p): Likewise.
	(tt_process_cmd_note): Likewise.
	(tt_process_cmd_create): Likewise.

2010-12-19  Jose E. Marchesi  <jemarch@gnu.org>

	Misc portability problems fixed.
	* utils/recutl.h: Make recutl_fatal and recutl_error to get a
	const char pointer as its first argument.

	* utils/recutl.c: Include locale.h.

	* src/rec-writer.c (rec_write_comment): Use strdup instead of
	strdupa.
	(rec_write_comment): Avoid freeing a tail of a string returned by
	strdup.

2010-12-19  Jose E. Marchesi  <jemarch@gnu.org>

	Include gettext.h instead of libintl.h.
	* src/rec.c: Include gettext.h instead of libintl.h.
	* utils/recutl.c: Likewise.
	* utils/recset.c: Likewise.
	* utils/recsel.c: Likewise.
	* utils/recins.c: Likewise.
	* utils/recinf.c: Likewise.
	* utils/recfix.c: Likewise.
	* utils/recdel.c: Likewise.
	* utils/mdb2rec.c: Likewise.
	* utils/csv2rec.c: Likewise.
	* src/rec-utils.c: Likewise.
	* src/rec-types.c: Likewise.
	* src/rec-parser.c: Likewise.
	* src/rec-int.c: Likewise.
	* src/rec-field-name.c: Likewise.
	* src/rec-fex.c: Likewise.

2010-12-19  Jose E. Marchesi  <jemarch@gnu.org>

	gettext-h module imported from gnulib.
	* m4/configmake.m4: New file.

2010-12-19  Jose E. Marchesi  <jemarch@gnu.org>

	librec: use %zu instead of %d to print size_t values in *printf
	calls.
	* src/rec-field.c (rec_field_set_location): Use %zu instead of %d
	to print size_t values.
	(rec_field_set_char_location): Likewise.
	* src/rec-types.c (rec_type_check_size): Likewise.
	* src/rec-parser.c (rec_parser_perror): Likewise.
	* src/rec-record.c (rec_record_set_location): Likewise.
	(rec_record_set_char_location): Likewise.

2010-12-19  Jose E. Marchesi  <jemarch@gnu.org>

	librec: use the safer construction asprintf instead of sprintf.
	* src/rec-fex.c (rec_fex_str): Use asprintf instead of sprintf.
	* src/rec-types.c (rec_type_check_size): Likewise.
	(rec_type_check_range): Likewise.
	* src/rec-record.c (rec_record_set_location): Likewise.
	(rec_record_set_char_location): Likewise.
	* src/rec-parser.c (rec_parser_perror): Likewise.
	* src/rec-int.c (rec_int_check_field_type): Likewise.
	(rec_int_check_record_mandatory): Likewise.
	(rec_int_check_record_unique): Likewise.
	(rec_int_check_record_prohibit): Likewise.
	(rec_int_check_record_key): Likewise.
	(rec_int_check_descriptor): Likewise.
	* src/rec-field.c (rec_field_set_location): Likewise.

2010-12-18 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 30 resolved to 'DONE'.

2010-12-18  Jose E. Marchesi  <jemarch@gnu.org>

	Stop using the non portable open_memstream.
	* torture/rec-writer/rec-write-comment.c: Use the
	rec_writer_new_str function instead of open_memstream and file
	streams.
	* torture/rec-writer/rec-write-rset.c: Likewise.
	* torture/rec-writer/rec-write-record-with-fex.c: Likewise.
	* torture/rec-writer/rec-write-record.c: Likewise.
	* torture/rec-writer/rec-write-field-name.c: Likewise.
	* torture/rec-writer/rec-write-field.c: Likewise.
	* torture/rec-writer/rec-write-db.c: Likewise.

	* utils/recins.c: Don't use open_memstream.
	* utils/recset.c: Likewise.
	* utils/recutl.c: Likewise.

	* src/rec-buf.c: New file.

	* src/rec.h: Get a char** argument instead of a stream for the
	'errors' argument of the function rec_int_check_db,
	rec_int_check_rset, rec_int_check_record and
	rec_int_check_field_type.
	rec_buf_* moved there from pdf-utils.h.

	* src/rec-writer.c: Support a rec_buf_t backend in the writer.
	(rec_writer_new_str): New function.
	(rec_writer_puts): Use the rec_buf backend if selected.
	(rec_writer_putc): Likewise.
	(rec_write_field_str): Use a rec_buf_t backed writer.
	(rec_write_field_name_str): Likewise.
	(rec_write_comment_str): Likewise.

	* src/rec-record.c (rec_record_to_comment): Use rec_buf_new
	instead of the non portable open_memstream.
	* src/rec-rset.c (rec_rset_rename_field): Likewise.

	* src/rec-types.c (rec_type_check): Use rec_buf_new instead of the
	non portable open_memstream.
	(rec_type_check_int): Likewise.
	(rec_type_check_field): Likewise.
	(rec_type_check_bool): Likewise.
	(rec_type_check_range): Likewise.
	(rec_type_check_real): Likewise.
	(rec_type_check_size): Likewise.
	(rec_type_check_line): Likewise.
	(rec_type_check_regexp): Likewise.
	(rec_type_check_date): Likewise.
	(rec_type_check_email): Likewise.
	(rec_type_check_enum): Likewise.

2010-12-17  Jose E. Marchesi  <jemarch@gnu.org>

	rec-utils: new open_memstream like API for rec_buf_t.
	* src/rec-parser.c (rec_parse_field_name_part): Use the new
	rec_buf_t API.
	(rec_parse_comment): Likewise.
	(rec_parse_field_value): Likewise.

	* src/rec-utils.h: New interface for the rec_buf_t abstract data
	type, including: rec_buf_new, rec_buf_putc, rec_buf_puts and
	rec_buf_close.
	* src/rec-utils.c: rec_buf_new, rec_buf_putc, rec_buf_puts and
	rec_buf_close implemented based in the old implementation.

2010-12-16  Jose E. Marchesi  <jemarch@gnu.org>

	syntax-check fixes.
	* libcsv/libcsv.c (VERSION): Changed to 3.0.0-recutils.
	Include config.h.

2010-12-16 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 34 resolved to 'DONE'.

2010-12-16  Jose E. Marchesi  <jemarch@gnu.org>

	libcsv embedded in the source tree.
	* utils/csv2rec.c: Include csv.h instead of libcsv/csv.h.

	* utils/Makefile.am (csv2rec_LDADD): Link with libcsv.la.
	(AM_CPPFLAGS): Add the libcsv/ directory to the include path.

	* configure.ac: Checks for libcsv removed.
	Conditional COMPILE_CSV2REC removed.

	* Makefile.am (SUBDIRS): libcsv/ added.

	* libcsv/csv.h: Imported from libcsv-3.0.0.tar.gz and relicensed
	from LGPL2.1+ to GPLv3.
	* libcsv/libcsv.c: Likewise.

	* libcsv/Makefile.am: New file.

2010-12-16 Jose Marchesi <jco@wilhelm>

	Tasktool operations.
	* TODO: Task 34 created.

2010-12-15  Jose E. Marchesi  <jemarch@gnu.org>

	tasktool: first version of log subcommand.
	* tasktool (tt_process_cmd_log): New function.
	(tt_help_log): New variable.
	(tt_parse_arguments): Handle the 'log' subcommand.

2010-12-14  Jose E. Marchesi  <jemarch@gnu.org>

	librec: new function rec_buf_add_str in rec-utils.
	* src/rec-utils.h: New function 'rec_buf_add_str'.

	* src/rec-utils.c (rec_buf_add_str): New function.

2010-12-14  Jose E. Marchesi  <jemarch@gnu.org>

	librec: rec_parser_buf abstraction moved to rec-utils as rec_buf.
	* src/rec-parser.c: Use the rec_buf_* functions instead of the
	rec_parser_buf_* functions.
	Include rec-utils.h.

	* src/rec-utils.c: Implementation of the rec_buf_t type and the
	rec_buf_* functions, moved and adapted from rec-parser.c.

	* src/rec-utils.h: New rec_buf_t abstract data type, renamed from
	the rec_parser_buf_t type and functions in rec-parser.h.

2010-12-14 Jose E. Marchesi <jemarch@gnu.org>

	Tasktool operations.
	* TODO: Note added for task 30.

2010-12-14  Jose E. Marchesi  <jemarch@gnu.org>

	librec: remove the usage of the non-portable fmemopen.
	* torture/rec-parser/rec-parse-db.c: Replace uses of fmemopen by
	buffer backed parsers.
	* torture/rec-parser/rec-parse-field.c: Likewise.
	* torture/rec-parser/rec-parse-field-name.c: Likewise.
	* torture/rec-parser/rec-parse-record.c: Likewise.
	* torture/rec-parser/rec-parser-eof.c: Likewise.
	* torture/rec-parser/rec-parser-error.c: Likewise.
	* torture/rec-parser/rec-parser-perror.c: Likewise.
	* torture/rec-parser/rec-parser-reset.c: Likewise.
	* torture/rec-parser/rec-parse-rset.c: Likewise.

	* src/rec-parser.c (rec_parse_field_name_str): Rewritten to use
	rec_parser_new_str and rec_parser_eof instead of fmemopen.
	(rec_parse_record_str): Likewise.

	* torture/rec-parser/rec-parser-new-str.c: New file.
	(test_rec_parser_new_str): New function.
	(rec_parser_new_str_nominal): New test.

	* src/rec-parser.c: New member 'buffer' in the struct
	rec_parser_s.
	(rec_parser_init_common): New function.
	(rec_parser_getc): Use the buffer backend if the parser was
	created with rec_parser_new_str.
	(rec_parser_ungetc): Likewise.

2010-12-13  Jose E. Marchesi  <jemarch@gnu.org>

	rec-mode: several fixes.
	* etc/rec-mode.el: Several fixes.
	* utils/recinf.c (print_info_file): Print "unknown" only if
	generated normal output.  It was breaking the sexps.

2010-12-13  Jose E. Marchesi  <jemarch@gnu.org>

	recins: check for integrity problems regardless of operational
	mode.
	* utils/recfix.c (recfix_process_data): Use new semantics of
	rec_int_check_db.

	* src/rec-int.c (rec_int_check_db): Return the number of errors
	found while checking the integrity of the database.
	(rec_int_merge_remote): Unused variable removed.

	* utils/recins.c (recins_add_new_record): Check for the integrity
	of the new database in both operation modes: normal and replace.

2010-12-13 Jose Marchesi <jco@wilhelm>

	Tasktool operations.
	* TODO: Task 30 edited.
	Task 30 edited.

2010-12-13  Jose E. Marchesi  <jemarch@gnu.org>

	librec: don't allow several %rec: fields in record descriptors.
	* src/rec-int.c (rec_int_check_descriptor): Don't allow more than
	one %rec: fields in record descriptors.

	* torture/utils/recfix.sh: New tests 'recfix-one-rec' and
	'recfix-multiple-rec-in-descriptor'.

2010-12-13  Jose E. Marchesi  <jemarch@gnu.org>

	rec-mode: initial version of rec-cmd-compile.
	* etc/rec-mode.el (rec-mode-edit-map): Map the rec-cmd-compile
	command.
	(rec-mode-map): Likewise.
	(rec-recfix): New variable.
	(rec-cmd-compile): New function.

2010-12-10 Jose Marchesi <jemarch@gnu.org>

	Tasktool operations.
	* TODO: Task 28 resolved to 'DONE'.

2010-12-10  Jose E. Marchesi  <jemarch@gnu.org>

	tasktool: support for categories.
	* tasktool (tt_task_categories): New category 'rec-mode'.
	(tt_process_cmd_list): Support the -c|--category parameter.
	(tt_db_template_task): Set 'Category' as a mandatory field.

	* TODO: Updated to reflect the new categories.

2010-12-04 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 30 created.
	Task 30 edited.

2010-12-04  Jose E. Marchesi  <jemarch@gnu.org>

	librec: do not include malloc.h.  Include the more portable
	stdlib.h instead.
	* src/rec-fex.c: Include stdlib.h instead of malloc.h.
	* src/rec-field-name.c: Likewise.
	* src/rec-field.c: Likewise.
	* src/rec-parser.c: Likewise.
	* src/rec-record.c: Likewise.
	* src/rec-rset.c: Likewise.
	* src/rec-sex.c: Likewise.
	* src/rec-writer.c: Likewise.

2010-12-04  Jose E. Marchesi  <jemarch@gnu.org>

	Avoid a segmentation fault in rec_write_rset.
	* src/rec-writer.c (rec_write_rset): Make sure that the descriptor
	of a record set exists before to try to write it.  Problem
	reported by Elias Pipping.

2010-12-02  Jose E. Marchesi  <jemarch@gnu.org>

	rec-types: support ranges with implicit minimum limit.
	* torture/utils/recfix.sh (recfix-ranges-ok): New test.
	(recfix-ranges-xfail-1): New test.
	(recfix-ranges-xfail-2): New test.

	* torture/rec-type/rec-type-new.c: Test ranges with just one
	index.

	* src/rec-types.c (REC_TYPE_RANGE_DESCR_RE): Allow the omission of
	one of the indexes of the range.
	(rec_type_parse_range): Allow the omission of one of the indexes.

2010-12-02  Jose E. Marchesi  <jemarch@gnu.org>

	mdb2rec: normalise field names appearing in %type fields.
	* utils/mdb2rec.c (process_table): Use normalised field name parts
	in the %type: entries for columns.

2010-12-01 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 29 created.

2010-12-01  Jose E. Marchesi  <jemarch@gnu.org>

	tasktool: fix the setting of the close time when resolving.
	* tasktool (tt_process_cmd_resolve): Add or set the closing time
	for a task, depending if there is an existing 'ClosedAt' field.

2010-12-01 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 25 edited.
	Task 28 created.
	Task 27 created.
	Task 24 edited.
	Task 26 created.

2010-12-01  Jose E. Marchesi  <jemarch@gnu.org>

	tasktool: control record support.
	* TODO: Control record added.

	* tasktool: Support for the TasktoolControl record and NextFreeId
	field added.

2010-12-01  Jose E. Marchesi  <jemarch@gnu.org>

	rec-writer: cover an additional special case in rec_write_rset.
	* src/rec-writer.c (rec_write_rset): Cover the special case where
	a record set contains a set of comments followed by the record
	descriptor.

	* torture/utils/recins.sh: New tests 'recins-only-descriptor' and
	'recins-comments-and-descriptor'.

2010-12-01  Jose E. Marchesi  <jemarch@gnu.org>

	tasktool: escape parameters passed to eval.
	* tasktool (tt_escape_single_quoted): New function.
	(tt_process_cmd_create): Escape all the parameters used in single
	quoted strings passed to eval.

2010-11-30 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 19 resolved to 'DONE'.
	Task 24 edited.
	Task 24 created.

2010-11-30  Jose E. Marchesi  <jemarch@gnu.org>

	Tests for the before, after and sametime operators.
	* torture/utils/recsel.sh: New input file 'dates'.
	(recsel-sex-date-sametime): New test.
	(recsel-sex-date-before): New test.
	(recsel-sex-date-after): New test.

2010-11-30  Jose E. Marchesi  <jemarch@gnu.org>

	Documentation of the before, after and sametime operators.
	* doc/recutils.texi (SEX Operators): Date operators documented.

2010-11-30  Jose E. Marchesi  <jemarch@gnu.org>

	Date operators before, after and sametime implementation.
	* src/rec-sex.c (timespec_subtract): New function.
	(rec_sex_eval_node): Manage REC_SEX_OP_BEFORE.
	(rec_sex_eval_node): Manage REC_SEX_OP_AFTER.
	(rec_sex_eval_node): Manage REC_SEX_OP_SAMETIME.

	* src/rec-sex-ast.h: Constants for the date operators.

	* src/rec-sex-tab.y: Support for the date operators.

	* src/rec-sex-lex.l: New tokens for date operators '<<', '>>' and
	'=='.

2010-11-29  Jose E. Marchesi  <jemarch@gnu.org>

	* NEWS: Updated for 1.0 release.

2010-11-27  Jose E. Marchesi  <jemarch@gnu.org>

	Syntax check fixes.
	* TESTS: Regenerated.

	* torture/rec-record/rec-record-field-p.c: Trailing blanks
	removed.

	* torture/utils/Makefile.am (TESTS_ENVIRONMENT): Use
	$(PATH_SEPARATOR) instead of ':'.

2010-11-27 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 22 edited.

2010-11-27  Jose E. Marchesi  <jemarch@gnu.org>

	Support for file paths as external descriptors.
	* src/rec-types.c (rec_type_check_enum): Add digits in enum
	constants.

	* doc/recutils.texi (External Descriptors): File paths in external
	descriptors sources documented.

	* src/rec-int.c (rec_int_rec_type_p): Use REC_FILE_REGEXP.

	* src/rec-utils.c (rec_extract_file): New file.

2010-11-25 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 23 edited.
	Task 18 edited.

2010-11-25  Jose E. Marchesi  <jemarch@gnu.org>

	recset: support for -r|--rename.
	* torture/rec-type/rec-type-descr-type.c: New file.
	(test_rec_type_descr_type): New function.
	(rec_type_descr_type_nominal): New test.
	(rec_type_descr_type_invalid): New test.

	* src/rec-types.c (rec_type_descr_type): New function.

	* TODO: Regenerated.

	* torture/rec-fex/rec-fex-str.c: New file.
	(test_rec_fex_str): New function.
	(rec_fex_str_nominal): New test.

	* src/rec-fex.c (rec_fex_elem_set_field_name): New function.
	(rec_fex_str): New function.

	* src/rec-rset.c (rec_rset_rename_field): New function.

	* torture/utils/recset.sh:
	(recset-rename): New test.
	(recset-rename-first): New test.
	(recset-rename-middle): New test.
	(recset-rename-last): New test.
	(recset-rename-range-first): New test.
	(recset-rename-range-last): New test.
	(recset-rename-range-all): New test.
	(recset-rename-all): New test.
	(recset-rename-all-descriptor): New test.
	(recset-rename-all-key): New test.
	(recset-rename-invalid-fex): New test.

	* doc/recutils.texi (recset Invocation): Document -r|--rename.
	(recset Examples): Added example for recset rename.

	* utils/recset.c (recutl_print_help): New option -r|--rename
	documented.
	(RECSET_ACT_RENAME): New constant.
	(recset_process_ren): New function.

2010-11-23 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 23 created.

2010-11-23  Jose E. Marchesi  <jemarch@gnu.org>

	System tests for the utilities.
	* torture/utils/recfix.sh: New file.
	(recfix-type-int-valid): New test.
	(recfix-type-int-invalid): New test.
	(recfix-type-real-valid): New test.
	(recfix-type-real-invalid): New test.
	(recfix-duplicated-keys): New test.
	(recfix-missing-mandatory): New test.
	(recfix-several-unique): New test.
	(recfix-referred-type): New test.
	(recfix-hidden-type): New test.

	* torture/utils/testutils.sh: Support expected statuses 'ok' and
	'xfail' in 'test_tool'.

	* torture/utils/recset.sh: New file.
	(recset-append-field): New test.
	(recset-set-field): New test.
	(recset-delete-field): New test.
	(recset-comment-out-field): New test.
	(recset-delete-non-existant): New test.
	(recset-comment-out-fex-first): New test.
	(recset-comment-out-fex-last): New test.
	(recset-force-integrity): New test.

	* torture/utils/recins.sh: New file.
	(recins-empty): New test.
	(recins-empty-with-type): New test.
	(recins-several-fields): New test.
	(recins-append): New test.
	(recins-append-in-type): New test.
	(recins-append-new-type): New test.
	(recins-replace): New test.
	(recins-replace-sex): New test.
	(recins-force-restrictions): New test.

	* torture/utils/recdel.sh: New file.
	(recdel-first): New test.
	(recdel-second): New test.
	(recdel-last): New test.
	(recdel-comment): New test.
	(recdel-sex): New test.
	(recdel-type): New test.
	(recdel-force-all): New test.

	* utils/recutl.c (recutl_write_db_to_file): Close the stream to
	'out' if it is not 'stdout' only.

	* torture/utils/recinf.sh: New file.
	(recinf-empty): New test.
	(recinf-one-record): New test.
	(recinf-multiple-records): New test.
	(recinf-multiple-named): New test.
	(recinf-multiple-named-descriptors): New test.
	(recinf-multiple-types): New test.
	(recinf-names-only): New test.

	* torture/Makefile.am (SUBDIRS): Process the current directory
	before 'utils/'.
	(recsel-sex-sharp-zero): New test.
	(recsel-sex-sharp-one): New test.
	(recsel-sex-sharp-multiple): New test.
	(recsel-sex-match): New test.

2010-11-21  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	manual: fix overlong lines and a couple of examples.
	* doc/recutils.texi (recsel Invocation, recins Invocation)
	(recins Examples): Do not recommend appending to a file while
	reading it.  Avoid overlong lines in the synopses and examples.

2010-11-21  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix make check in VPATH case.
	* torture/utils/recsel.sh: Ensure $srcdir is set; read
	testsutils.sh from $srcdir.
	* torture/utils/testutils.sh: Add $srcdir to PATH.

2010-11-21  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Tasktool operations.
	* tasktool (tt_add_changelog_entry): Use portable sed features
	only.  Avoid changing more than the first matching entry.

2010-11-20  Jose E. Marchesi  <jemarch@gnu.org>

	Support negative integer and real literals in selection
	expressions.
	* src/rec-sex-lex.l: Support negative integers and reals in the
	lexer level.

	* torture/utils/recsel.sh: Integer and real operators tests.

2010-11-20 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 11 edited.

2010-11-20  Jose E. Marchesi  <jemarch@gnu.org>

	* tasktool (tt_process_cmd_list): Do not include tasks in
	"resolution" status by default.
	Include the status in the list.

2010-11-19 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 3 edited.

2010-11-15  Jose E. Marchesi  <jemarch@gnu.org>

	* torture/utils/Makefile.am: New file.

2010-11-15  Jose E. Marchesi  <jemarch@gnu.org>

	rec-sex: unit tests.
	* torture/rec-sex/rec-sex-eval.c: New file.
	(test_rec_sex_eval): New function.
	(rec_sex_eval_match): New test.
	(rec_sex_eval_nomatch): New test.

	* torture/rec-sex/rec-sex-compile.c: New file.
	(test_rec_sex_compile): New function.
	(rec_sex_compile_nominal): New test.
	(rec_sex_compile_invalid): New test.

	* torture/rec-sex/rec-sex-destroy.c: New file.
	(test_rec_sex_destroy): New function.
	(rec_sex_destroy_nominal): New test.

	* torture/rec-sex/rec-sex-new.c: New file.
	(test_rec_sex_new): New function.
	(rec_sex_new_nominal): New test.

	* torture/rec-sex/tsuite-rec-sex.c: New file.
	(tsuite_rec_sex): New function.

2010-11-15  Jose E. Marchesi  <jemarch@gnu.org>

	utils: compilation warnings removed.
	* utils/recinf.c: Unused variables removed.
	* utils/recsel.c: Likewise.
	* utils/recset.c: Likewise.
	* utils/recins.c: Likewise.

2010-11-15  Jose E. Marchesi  <jemarch@gnu.org>

	rec-writer: unit tests.
	* torture/rec-writer/rec-write-comment-str.c: New file.
	(test_rec_write_comment_str): New function.
	(rec_write_comment_str_nominal): New test.
	(rec_write_comment_str_sexp): New test.

	* torture/rec-writer/rec-write-field-str.c: New file.
	(test_rec_write_field_str): New function.
	(rec_write_field_str_nominal): New test.
	(rec_write_field_str_sexp): New test.

	* torture/rec-writer/rec-write-field-name-str.c: New file.
	(test_rec_write_field_name_str): New function.
	(rec_write_field_name_str_nominal): New test.
	(rec_write_field_name_str_sexp): New test.

	* torture/rec-writer/rec-write-db.c: New file.
	(test_rec_write_db): New function.
	(rec_write_db_nominal): New test.

	* torture/rec-writer/rec-write-rset.c: New file.
	(test_rec_write_rset): New function.
	(rec_write_rset_nominal): New test.

	* torture/rec-writer/rec-write-record-with-fex.c: New file.
	(test_rec_write_record_with_fex): New function.
	(rec_write_record_with_fex_nominal): New test.
	(rec_write_record_with_fex_values): New test.
	(rec_write_record_with_fex_rows): New test.

2010-11-14  Jose E. Marchesi  <jemarch@gnu.org>

	rec-write unit tests.
	* torture/rec-writer/rec-write-record.c: New file.
	(test_rec_write_record): New function.
	(rec_write_record_nominal): New test.
	(rec_write_record_sexp): New test.

	* torture/rec-writer/rec-write-field-name.c: New file.
	(test_rec_write_field_name): New function.
	(rec_write_field_name_nominal): New test.
	(rec_write_field_name_sexp): New test.

	* torture/rec-writer/rec-write-field.c: New file.
	(test_rec_write_field): New function.
	(rec_write_field_nominal): New test.
	(rec_write_field_sexp): New test.

	* torture/rec-writer/rec-write-comment.c: New file.
	(test_rec_write_comment): New function.
	(rec_write_comment_nominal): New test.
	(rec_write_comment_sexp): New test.

	* torture/rec-writer/rec-writer-destroy.c: New file.
	(test_rec_writer_destroy): New function.
	(rec_writer_destroy_nominal): New test.

	* torture/rec-writer/rec-writer-new.c: New file.
	(test_rec_writer_new): New function.
	(rec_writer_new_nominal): New test.

	* torture/rec-writer/tsuite-rec-writer.c: New file.
	(tsuite_rec_writer): New function.

2010-11-13  Jose E. Marchesi  <jemarch@gnu.org>

	rec-parser unit tests.
	* torture/rec-parser/rec-parser-perror.c: New file.
	(test_rec_parser_perror): New function.
	(rec_parser_perror_nominal): New test.

	* torture/rec-parser/rec-parser-reset.c: New file.
	(test_rec_parser_reset): New function.
	(rec_parser_reset_nominal): New test.

	* torture/rec-parser/rec-parser-error.c: New file.
	(test_rec_parser_error): New function.
	(rec_parser_error_nominal): New test.

	* torture/rec-parser/rec-parser-eof.c: New file.
	(test_rec_parser_eof): New function.
	(rec_parser_eof_nominal): New test.

	* torture/rec-parser/rec-parse-db.c: New file.
	(test_rec_parse_db): New function.
	(rec_parse_db_nominal): New test.
	(rec_parse_db_invalid): New test.

	* torture/rec-parser/rec-parse-rset.c: New file.
	(test_rec_parse_rset): New function.
	(rec_parse_rset_nominal): New test.
	(rec_parse_rset_invalid): New test.

	* torture/rec-parser/rec-parse-record.c: New file.
	(test_rec_parse_record): New function.
	(rec_parse_record_nominal): New test.
	(rec_parse_record_invalid): New test.

	* torture/rec-parser/rec-parse-field.c: New file.
	(test_rec_parse_field): New function.
	(rec_parse_field_nominal): New test.
	(rec_parse_field_invalid): New test.

	* torture/rec-parser/rec-parse-field-name.c: New file.
	(test_rec_parse_field_name): New function.
	(rec_parse_field_name_nominal): New test.
	(rec_parse_field_name_invalid): New test.

	* torture/rec-parser/rec-parse-field-name-str.c: New file.
	(test_rec_parse_field_name_str): New function.
	(rec_parse_field_name_str_nominal): New test.
	(rec_parse_field_name_str_invalid): New test.

	* torture/rec-parser/rec-parser-destroy.c: New file.
	(test_rec_parser_destroy): New function.
	(rec_parser_destroy_nominal): New test.

	* torture/rec-parser/rec-parser-new.c: New file.
	(test_rec_parser_new): New function.
	(rec_parser_new_nominal): New test.

	* torture/rec-parser/tsuite-rec-parser.c: New file.
	(tsuite_rec_parser): New function.

2010-11-12  Jose E. Marchesi  <jemarch@gnu.org>

	rec-field unit tests.
	* torture/rec-field/rec-field-to-comment.c: New file.
	(test_rec_field_to_comment): New function.
	(rec_field_to_comment_nominal): New test.

	* torture/rec-field/rec-field-set-char-location.c: New file.
	(test_rec_field_set_char_location): New function.
	(rec_field_set_char_location_nominal): New test.

	* torture/rec-field/rec-field-char-location-str.c: New file.
	(test_rec_field_char_location_str): New function.
	(rec_field_char_location_str_nominal): New test.

	* torture/rec-field/rec-field-char-location.c: New file.
	(test_rec_field_char_location): New function.
	(rec_field_char_location_nominal): New test.

	* torture/rec-field/rec-field-set-location.c: New file.
	(test_rec_field_set_location): New function.
	(rec_field_set_location_nominal): New test.

	* torture/rec-field/rec-field-location-str.c: New file.
	(test_rec_field_location_str): New function.
	(rec_field_location_str_nominal): New test.

	* torture/rec-field/rec-field-location.c: New file.
	(test_rec_field_location): New function.
	(rec_field_location_nominal): New test.

	* torture/rec-field/rec-field-set-source.c: New file.
	(test_rec_field_set_source): New function.
	(rec_field_set_source_nominal): New test.

	* torture/rec-field/rec-field-source.c: New file.
	(test_rec_field_source): New function.
	(rec_field_source_nominal): New test.

	* torture/rec-field/rec-field-equal-p.c: New file.
	(test_rec_field_equal_p): New function.
	(rec_field_equal_p_equal): New test.
	(rec_field_equal_p_nonequal): New test.

	* torture/rec-field/rec-field-name-str.c: New file.
	(test_rec_field_name_str): New function.
	(rec_field_name_str_nominal): New test.

	* torture/rec-field/rec-field-destroy.c: New file.
	(test_rec_field_destroy): New function.
	(rec_field_destroy_nominal): New test.

	* torture/rec-field/rec-field-new-str.c: New file.
	(test_rec_field_new_str): New function.
	(rec_field_new_str_nominal): New test.
	(rec_field_new_str_invalid): New test.

	* torture/rec-field/rec-field-new.c: New file.
	(test_rec_field_new): New function.
	(rec_field_new_nominal): New test.

2010-11-12  Jose E. Marchesi  <jemarch@gnu.org>

	More rec-fex unit tests.
	* torture/rec-fex/rec-fex-elem-max.c: New file.
	(test_rec_fex_elem_max): New function.
	(rec_fex_elem_max_nosubs): New test.
	(rec_fex_elem_max_min): New test.
	(rec_fex_elem_max_minmax): New test.

	* torture/rec-fex/rec-fex-elem-min.c: New file.
	(test_rec_fex_elem_min): New function.
	(rec_fex_elem_min_nosubs): New test.
	(rec_fex_elem_min_min): New test.
	(rec_fex_elem_min_minmax): New test.

	* torture/rec-fex/rec-fex-elem-field-name-str.c: New file.
	(test_rec_fex_elem_field_name_str): New function.
	(rec_fex_elem_field_name_str_nominal): New test.

2010-11-10  Jose E. Marchesi  <jemarch@gnu.org>

	More rec-fex unit tests.
	* torture/rec-fex/rec-fex-elem-field-name.c: New file.
	(test_rec_fex_elem_field_name): New function.
	(rec_fex_elem_field_name_nominal): New test.

	* torture/rec-fex/rec-fex-get.c: New file.
	(test_rec_fex_get): New function.
	(rec_fex_get_nominal): New test.
	(rec_fex_get_invalid): New test.

2010-11-09  Jose E. Marchesi  <jemarch@gnu.org>

	rec-fex unit tests and some fixes.
	* torture/rec-fex/rec-fex-size.c: New file.
	(test_rec_fex_size): New function.
	(rec_fex_size_nominal): New test.

	* torture/rec-fex/rec-fex-sort.c: New file.
	(test_rec_fex_sort): New function.
	(rec_fex_sort_nominal): New test.

	* torture/rec-fex/rec-fex-check.c: New file.
	(test_rec_fex_check): New funtion.
	(rec_fex_check_simple_nominal): New test.
	(rec_fex_check_simple_invalid): New test.
	(rec_fex_check_csv_nominal): New test.
	(rec_fex_check_csv_invalid): New test.
	(rec_fex_check_sub_nominal): New test.
	(rec_fex_check_sub_invalid): New test.

	* torture/rec-fex/rec-fex-destroy.c: New file.
	(test_rec_fex_destroy): New function.
	(rec_fex_destroy_nominal): New test.

	* src/rec-fex.c (rec_fex_parse_elem): Support for maximum part in
	subscripts.

	* torture/rec-fex/rec-fex-new.c: New file.
	(test_rec_fex_new): New function.
	(rec_fex_new_single): New test.
	(rec_fex_new_simple): New test.
	(rec_fex_new_subscripts): New test.

	* torture/rec-fex/tsuite-rec-fex.c: New file.
	(tsuite_rec_fex): New function.

2010-11-09  Jose E. Marchesi  <jemarch@gnu.org>

	Lists of field names supported in type definitions.  Closes task
	12.
	* TESTS: Regenerated.

	* torture/rec-type/tsuite-rec-type.c: Reference rec-type-descr-fex
	instead of rec-type-descr-field-name.
	* torture/Makefile.am (REC_TYPE_TSUITE): Likewise.

	* torture/rec-type/rec-type-descr-fex.c: File renamed from
	'rec-type-descr-field-name.c'.

	* src/rec-rset.c: Include rec-utils.h.

	* src/rec-types.c (REC_TYPE_DESCR_RE): Regexp modified to allow a
	comma-separated list of field names as part of the type
	descriptor.
	(rec_type_new): Skip the list of field names.
	(rec_type_descr_fex): Renamed from 'rec_type_descr_field_name'.

2010-11-08 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 19 created.

2010-11-08  Jose E. Marchesi  <jemarch@gnu.org>

	* tasktool: Make 'test' to use -ne and -eq for integer
	comparisons.  Problem reported by Ralf Wildenhues.

2010-11-07  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* doc/recutils.texi (recset Invocation): Avoid double `='.

	* man/Makefile.am (man_MANS): Do not build man pages when
	associated programs are not present.

	* tasktool (tt_rec_check_utility): Fix redirection.

2010-11-07 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 16 created.

2010-11-07  Jose E. Marchesi  <jemarch@gnu.org>

	Some improvements.
	* doc/recutils.texi (Record Descriptors): Documentation of the
	special fields fixed.

2010-11-07 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 15 created.

2010-11-07  Jose E. Marchesi  <jemarch@gnu.org>

	* AUTHORS: Ralf Wildenhues added.

2010-11-07 Jose E. Marchesi <jemarch@termi>

	Tasktool operations.
	* TODO: Task 14 created.
	Task 22 created.
	Task 10 edited.
	Task 21 edited.
	Task 21 created.
	Task 9 edited.
	Task 8 edited.
	Task 20 created.
	Task 18 created.
	Task 17 created.

2010-11-07  Jose E. Marchesi  <jemarch@gnu.org>

	recins: support replace mode.
	* tasktool (tt_supported_vcs): Use the replace-mode of recins.

	* doc/recutils.texi (recins Invocation): Replace mode documented.

	* utils/recins.c (COMMON_ARGS): RECORD_SELECTION_ARGS added.
	(recutl_print_help): Print the record selection --help output.
	(recins_parse_args): Manage record selection arguments.

2010-11-07  Jose E. Marchesi  <jemarch@gnu.org>

	recins: support -r|--record.
	* doc/recutils.texi (recins Invocation): Document -r|--record.

	* src/rec-parser.c (rec_parse_record_str): New function.

	* utils/recins.c (COMMON_ARGS): RECORD_ARG added.
	(recins_parse_args): Manage the -r|--record option.

2010-11-07  Jose E. Marchesi  <jemarch@gnu.org>

	tasktool: support filtering by assigned-to in list command.
	* tasktool: Support the --assigned-to option in 'list'.
	(tt_supported_vcs): Use generic names for the fields in the
	selection expression.
	(tt_help_edit): New variable.
	(tt_process_cmd_show): New function.

2010-11-06  Jose E. Marchesi  <jemarch@gnu.org>

	Syntax check fixes.
	* src/rec-int.c: Useless cpp parens removed.
	* src/rec.c: Likewise.

	* .x-sc_prohibit_always_true_header_tests: New file.

	* cfg.mk (gnulib_dir): Set gnulib_dir.

	* ChangeLog: Empty lines removed.
	* .x-sc_trailing_blank: Likewise.
	More exceptions added.

	* po/POTFILES.in: Updated.

	* .x-sc_prohibit_S_IS_definition: New file.

	* .x-sc_obsolete_symbols: New file.

2010-11-06  Jose E. Marchesi  <jemarch@gnu.org>

	* configure.ac: Generate etc/Makefile.

	* etc/Makefile.am: New file.

2010-11-06  Jose E. Marchesi  <jemarch@gnu.org>

	* etc/FSD.rec: New file.

	* doc/recutils.texi: Document the --no-remote command line
	argument for recins, recfix and recset.

	* utils/recins.c: Support the --no-remote command line argument.
	* utils/recfix.c: Likewise.
	* utils/recset.c: Likewise.

	* src/rec-int.c (rec_int_check_rset): New function argument
	'remote_descriptor_p'.
	(rec_int_check_rset): Call 'rec_int_merge_remote'.
	(rec_int_merge_remote): New function.
	Include regex.h.

2010-11-06  Jose E. Marchesi  <jemarch@gnu.org>

	tasktool: support for ChangeLog annotations.
	* tasktool (tt_supported_vcs): New function.

2010-11-06  Jose E. Marchesi  <jemarch@gnu.org>

	* configure.ac: Version changed from git to 1.0.

	* TODO: Some tasks added.

2010-11-05  Jose E. Marchesi  <jemarch@gnu.org>

	* TODO: First serious version.

	* tasktool: Fixed many problems and 'delete' command implemented.

2010-11-03  Jose E. Marchesi  <jemarch@gnu.org>

	recfix: little fixes.
	* utils/recfix.c (main): Use EXIT_SUCCESS and EXIT_FAILURE.
	(recfix_process_data): Fix wrong comparison.

2010-11-02  Jose E. Marchesi  <jemarch@gnu.org>

	Generate manpages using help2man.
	* configure.ac: Generate man/Makefile.

	* man/Makefile.am: New file.

	* configure.ac: Search for help2man if not cross-compiling.

2010-11-01  Jose E. Marchesi  <jemarch@gnu.org>

	Syntax check problems fixed.
	* src/rec-writer.c: Include config.h.
	* torture/runtests.c: Likewise.

	* tasktool: Use test ... && test ... instead of test ... -a
	... (likewise for ||).

	* utils/csv2rec.c (parse_args): Use EXIT_* values.
	* utils/recutl.h: Likewise.
	* utils/recutl.c: Likewise.
	* utils/recset.c: Likewise.
	* utils/recsel.c: Likewise.
	* utils/recins.c: Likewise.
	* utils/recinf.c: Likewise.
	* utils/recfix.c: Likewise.
	* utils/recdel.c: Likewise.
	* utils/mdb2rec.c: Likewise.
	* src/rec-types.c: Likewise.
	* src/rec-sex.c: Likewise.

2010-11-01  Jose E. Marchesi  <jemarch@gnu.org>

	Make distcheck to work.
	* doc/recutils.texi: Include version.texi.

	* doc/Makefile.am (TEXI_TEXINFOS): Added getdate.texi.

	* torture/rec-mset/rec-mset-count.c: Include
	rec-mset/elem-types.h.
	* torture/rec-mset/rec-mset-type-p.c: Likewise.
	* torture/rec-mset/rec-mset-register-type.c: Likewise.
	* torture/rec-mset/rec-mset-dup.c: Likewise.

	* torture/Makefile.am (AM_CPPFLAGS): -I$(top_srcdir)/torture
	added.

2010-10-29  Jose E. Marchesi  <jemarch@gnu.org>

	Warnings removed in the codebase.
	* src/rec-sex.c: Include rec-utils.h.

	* src/rec-sex.l: Include rec-utils.h.

	* src/rec-types.c (rec_type_new): Missing cases REC_TYPE_DATE and
	REC_TYPE_EMAIL added.
	Include rec-utils.h for rec-atoi.
	(rec_type_parse_regexp): Unused variable 'b' removed.
	(rec_type_descr_field_name): Likewise.
	(rec_type_new): Likewise.
	(rec_type_parse_size): Unused variable 'ret' removed.
	(rec_type_parse_regexp_type): Unused variable 'escaping' removed.

	* src/rec-fex.c: Include rec-utils.h for rec-atoi.
	Unused static function rec_fex_parse_int removed.

2010-10-29  Jose E. Marchesi  <jemarch@gnu.org>

	Coverage report generation.
	* build-aux/generate-coverage-report: New file, from libgnupdf.

	* configure.ac: Support the --enable-coverage switch.

	* src/Makefile.am (AM_CFLAGS): Add coverage gcc options if
	compiling the library with coverage support.

2010-10-29  Jose E. Marchesi  <jemarch@gnu.org>

	rec-type-reg unit tests and bug fixes.
	* torture/rec-type-reg/rec-type-reg-get.c: New file.
	(test_rec_type_reg_get): New function.
	(rec_type_reg_get_nominal): New test.
	(rec_type_reg_get_nonexisting): New test.

	* torture/rec-type-reg/rec-type-reg-register.c: New file.
	(test_rec_type_reg_register): New function.
	(rec_type_reg_register_nominal): New test.

	* torture/rec-type-reg/rec-type-reg-destroy.c: New file.
	(test_rec_type_reg_destroy): New function.
	(rec_type_reg_destroy_nominal): New test.

	* torture/rec-type-reg/rec-type-reg-new.c: New file.
	(test_rec_type_reg_new): New function.
	(rec_type_reg_new_nominal): New test.

	* torture/rec-type-reg/tsuite-rec-type-reg.c: New file.
	(tsuite_rec_type_reg): New function.

2010-10-29  Jose E. Marchesi  <jemarch@gnu.org>

	rec-type unit tests and bug fixes.
	* torture/rec-type/rec-type-check.c: New file.
	(test_rec_type_check): New function.
	(rec_type_check_int): New test.
	(rec_type_check_bool): New test.
	(rec_type_check_range): New test.
	(rec_type_check_real): New test.
	(rec_type_check_size): New test.
	(rec_type_check_line): New test.
	(rec_type_check_regexp): New test.
	(rec_type_check_date): New test.
	(rec_type_check_enum): New test.
	(rec_type_check_field): New test.
	(rec_type_check_email): New test.

	* torture/rec-type/rec-type-equal-p.c: New file.
	(test_rec_type_equal_p): New function.
	(rec_type_equal_p_nominal): New test.

	* torture/rec-type/rec-type-kind-str.c: New file.
	(test_rec_type_kind_str): New function.
	(rec_type_kind_str_nominal): New test.

	* torture/rec-type/rec-type-kind.c: New file.
	(test_rec_type_kind): New function.
	(rec_type_kind_nominal): New test.

	* torture/rec-type/rec-type-descr-field-name.c: New file.
	(test_rec_type_descr_field_name): New function.
	(rec_type_descr_field_name_nominal): New test.
	(rec_type_descr_field_name_invalid): New test.

	* torture/rec-type/rec-type-descr-p.c: New file.
	(test_rec_type_descr_p): New function.
	(rec_type_descr_p_nominal): New test.
	(rec_type_descr_p_invalid): New test.

	* torture/rec-type/rec-type-destroy.c: New file.
	(test_rec_type_destroy): New function.
	(rec_type_destroy_nominal): New test.

	* torture/rec-type/rec-type-new.c: New file.
	(test_rec_type_new): New function.
	(rec_type_new_nominal): New test.
	(rec_type_new_invalid): New test.

	* torture/rec-type/tsuite-rec-type.c: New file.
	(tsuite_rec_type): New function.

2010-10-29  Jose E. Marchesi  <jemarch@gnu.org>

	rec-field-name unit tests and bug fixes.
	* TESTS: Regenerated.

	* torture/rec-field-name/rec-field-name-part-normalise.c: New
	file.
	(test_rec_field_name_part_normalise): New function.
	(rec_field_name_part_normalise_nominal): New test.

	* torture/rec-field-name/rec-field-name-str-p.c: New file.
	(test_rec_field_name_str_p): New function.
	(rec_field_name_str_p_nominal): New test.

	* torture/rec-field-name/rec-field-name-part-str-p.c: New file.
	(test_rec_field_name_part_str_p): New function.
	(rec_field_name_part_str_p_nominal): New test.

	* torture/rec-field-name/rec-field-name-get.c: New file.
	(test_rec_field_name_get): New function.
	(rec_field_name_get_nominal): New test.

	* torture/rec-field-name/rec-field-name-set.c: New file.
	(test_rec_field_name_set): New function.
	(rec_field_name_set_nominal): New test.

	* torture/rec-field-name/rec-field-name-size.c: New file.
	(test_rec_field_name_size): New function.
	(rec_field_name_size_empty): New test.
	(rec_field_name_size_nonempty): New test.

	* torture/rec-field-name/rec-field-name-ref-p.c: New file.
	(test_rec_field_name_ref_p): New function.
	(rec_field_name_ref_p_empty): New test.
	(rec_field_naem_ref_p_nonempty): New test.

	* torture/rec-field-name/rec-field-name-equal-p.c: New file.
	(test_rec_field_name_equal_p): New function.
	(rec_field_name_equal_p_empty): New test.
	(rec_field_name_equal_p_nonempty): New test.

	* torture/rec-field-name/rec-field-name-eql-p.c: New file.
	(test_rec_field_name_eql_p): New function.
	(rec_field_name_eql_p_empty): New test.
	(rec_field_naem_eql_p_nonempty): New test.

	* torture/rec-field-name/rec-field-name-dup.c: New file.
	(test_rec_field_name_dup): New function.
	(rec_field_name_dup_empty): New test.
	(rec_field_name_dup_nominal): New test.

	* torture/rec-field-name/rec-field-name-destroy.c: New file.
	(test_rec_field_name_destroy): New function.
	(rec_field_name_destroy_nominal): New test.

	* torture/rec-field-name/tsuite-rec-field-name.c: New file.

	* torture/rec-field-name/rec-field-name-new.c: New file.
	(test_rec_field_name_new): New function.
	(rec_field_name_new_nominal): New test.

2010-10-29  Jose E. Marchesi  <jemarch@gnu.org>

	rec-comment unit tests and bug fixes.
	* TESTS: regenerated.

	* src/rec-comment.c (rec_comment_new): Check for a NULL argument.

	* torture/rec-comment/rec-comment/equal-p.c: New file.
	(test_rec_comment_equal_p): New function.
	(rec_comment_equal_p_nominal): New test.

	* torture/rec-comment/rec-comment-set-text.c: New file.
	(test_rec_comment_set_text): New function.
	(rec_comment_set_text_nominal): New test.

	* torture/rec-comment/rec-commment-text.c: New file.
	(test_rec_comment_text): New function.
	(rec_comment_text_nominal): New test.
	(rec_comment_text_empty): New test.

	* torture/rec-comment/rec-comment-dup.c: New file.
	(test_rec_comment_dup): New function.
	(rec_comment_dup_nominal): New test.

	* torture/rec-comment/rec-comment-new.c: New file.
	(test_rec_comment_new): New function.
	(rec_comment_new_nominal): New test.
	(rec_comment_new_null): New test.

	* torture/rec-comment/rec-comment-destroy.c: New file.
	(test_rec_comment_destroy): New function.
	(rec_comment_destroy_nominal): New test.

	* torture/runtests.c (main): rec-comment test suite added.

	* torture/Makefile.am: rec-comment files added.

	* torture/rec-comment/tsuite-rec-comment.c: New file.
	(tsuite_rec_comment): New function.

2010-10-28  Jose E. Marchesi  <jemarch@gnu.org>

	Regenerate TESTS.
	* TESTS: Regenerated.

2010-10-28  Jose E. Marchesi  <jemarch@gnu.org>

	Unit tests for rec_mset_get.
	* torture/rec-mset/rec-mset-get.c: New file
	(test_rec_mset_get): New function.
	(rec_mset_get_empty): New test.
	(rec_mset_get_existing): New test.
	(rec_mset_get_any): New test.
	(rec_mset_get_invalid): New test.

2010-10-28  Jose E. Marchesi  <jemarch@gnu.org>

	Unit tests for rec_mset_count.
	* torture/rec-mset/rec-mset-count.c: New file.
	(test_rec_mset_count): New function.
	(rec_mset_count_empty): New test.
	(rec_mset_count_existing): New test.
	(rec_mset_count_nonexisting): New test.

2010-10-28  Jose E. Marchesi  <jemarch@gnu.org>

	Unit tests for rec_mset_register_type.
	* torture/rec-mset/rec-mset-register-type.c: New file.
	(test_rec_mset_register_type): New function.
	(rec_mset_register_type_nominal): New test.

2010-10-28  Jose E. Marchesi  <jemarch@gnu.org>

	Unit tests for rec_mset_type_p.
	* torture/rec-mset/rec-mset-type-p.c: New file.
	(test_rec_mset_type_p): New function.
	(rec_mset_type_p_any): New test.
	(rec_mset_type_p_existing): New test.
	(rec_mset_type_p_nonexisting): New test.

	* torture/rec-mset/elem-types.h: New file.

2010-10-28  Jose E. Marchesi  <jemarch@gnu.org>

	Unit tests for rec_mset_dup, and a bug fixed.
	* src/rec-mset.c (rec_mset_dup): Avoid duplicating the counter of
	nodes of the element types.

	* torture/Makefile.am (REC_MSET_TSUITE): rec-mset-dup.c added.

	* torture/rec-mset/rec-mset-dup.c: New file.
	(test_rec_mset_dup): New function.
	(rec_mset_dup_empty): New test.

2010-10-28  Jose E. Marchesi  <jemarch@gnu.org>

	rec_mset test suite.
	* torture/runtests.c: rec_mset test suite added.

	* torture/Makefile.am: Include files from the rec_mset test suite.

	* torture/rec-mset/rec-mset-new.c: New file.
	(rec_mset_new_and_destroy): New unit test.

	* torture/rec-mset/tsuite-rec-mset.c: New file.
	(tsuite_rec_mset): New function.

2010-10-28  Jose E. Marchesi  <jemarch@gnu.org>

	* tasktool (tt_db_template_header): New variable.
	(tt_db_template_issue): New variable.
	(tt_db_template): Use tt_db_template_header and tt_db_template_issue.
	(tt_db_wish): New variable.
	(tt_db_wish_id): New variable.
	(tt_db_wish_summary): New variable.
	(tt_db_wish_description): New variable.

2010-10-28  Jose E. Marchesi  <jemarch@gnu.org>

	Documentation improvements.
	* utils/recset.c (recutl_print_help): Don't duplicate the
	--case-insensitive option in the output of --help.

	* utils/recinf.c (recutl_print_help): Print a newline before the
	examples in the output of --help.

	* doc/recutils.texi: Documentation for recdel, recins, recset and
	recfix added to the reference manual.

2010-10-25  Jose E. Marchesi  <jemarch@gnu.org>

	User manual work.
	* doc/recutils.texi (Fields and Records): Wording improvements.
	(Escalar types): Completed.
	(String types): Completed.
	(Time related types): Completed.
	(recinf Invocation): Document -S|--print-sexps.

	* doc/recutils.texi (Top): Improve the menu layout.

2010-10-24  Jose E. Marchesi  <jemarch@gnu.org>

	i18n with gettext.
	* m4/gettext.m4: Upgrade to gettext-0.18.1.
	* m4/iconv.m4: Upgrade to gettext-0.18.1.
	* m4/lib-ld.m4: Upgrade to gettext-0.18.1.
	* m4/lib-link.m4: Upgrade to gettext-0.18.1.
	* m4/progtest.m4: Upgrade to gettext-0.18.1.
	* configure.ac (AM_GNU_GETTEXT_VERSION): Bump to 0.18.1.

	* src/Makefile.am (librec_la_SOURCES): Add rec.c.

	* src/rec-fex.c: Internationalize strings with gettext.
	* src/rec-types.c: Likewise.
	* src/rec-parser.c: Likewise.
	* src/rec-int.c: Likewise.
	* src/rec-field-name.c: Likewise.
	* utils/recutl.c: Likewise.
	* utils/recset.c: Likewise.
	* utils/recsel.c: Likewise.
	* utils/recins.c: Likewise.
	* utils/recinf.c: Likewise.
	* utils/recdel.c: Likewise.
	* utils/mdb2rec.c: Likewise.
	* utils/csv2rec.c: Likewise.

	* Makefile.am (SUBDIRS): Add po.

2010-09-23  Jose E. Marchesi  <jemarch@gnu.org>

	* configure.ac: Invoke AB_INIT.

2010-09-19  Jose E. Marchesi  <jemarch@gnu.org>

	Simple fix in --help.
	* utils/recutl.h (COMMON_ARGS_DOC): Don't mention recsel in the
	description of the --version option.

2010-09-14  Jose E. Marchesi  <jemarch@gnu.org>

	rec-mode: make C-a to do the right thing.
	* lisp/rec-mode.el (rec-mode-map): Bind C-a to
	rec-cmd-beginning-of-line.
	(rec-mode-edit-map): Likewise.
	(rec-cmd-beginning-of-line): New function.

2010-09-09  Jose E. Marchesi  <jemarch@gnu.org>

	Support for localization on lisp output.
	* src/rec-record.c: New fiels 'char_location' and
	'char_location_str' in the 'rec_record_s' struct.

	* src/rec-parser.c (rec_parse_field): Set the char location of
	fields.
	(rec_parser_ungetc): Decrease parser->character.

	* src/rec-field.c: New functions 'rec_field_char_location',
	'rec_field_set_char_location' and 'rec_field_char_location_str'.

	* src/rec-parser.c: Use size_t instead of int for the 'line' field
	of the rec_parser_s structure.
	(rec_parser_getc): Update parser->character as well.
	(rec_parser_new): Initialize parser->character to 0.

2010-09-09  Jose E. Marchesi  <jemarch@gnu.org>

	Support for lisp output.
	* utils/recinf.c: Support the -S option.

	* utils/recsel.c: Likewise.

	* src/rec-writer.c (rec_write_record): New 'mode' argument.
	(rec_write_field_name): Likewise.
	(rec_write_field): Likewise.
	(rec_write_field_str): Likewise.

	* src/rec.h: New function.
	(rec_writer_mode_t): New data type.

2010-09-02  Jose E. Marchesi  <jemarch@gnu.org>

	Little doc improvements.
	* doc/recutils.texi: Little doc improvements.

2010-08-24  Jose E. Marchesi  <jemarch@gnu.org>

	fixes in the parsing of types.
	* src/rec-int.c (rec_int_check_descriptor): Localize the error in
	the concrete field.

	* src/rec-types.c: Parsing routines rewritten.

2010-08-23  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-types.c (rec_type_skip_blanks): New function.
	(rec_type_descr_field_name): Use rec_type_skip_blanks.
	(rec_type_new): Likewise.
	(rec_type_parse_int): New function.

2010-08-23  Jose E. Marchesi  <jemarch@gnu.org>

	rec-sex: support for real values in some operators.
	* src/rec-sex.c (rec_sex_op_real_p): New function.
	(ATOF_VAL): New macro.

2010-08-23  Jose E. Marchesi  <jemarch@gnu.org>

	utilities: use xmalloc and xstrdup.
	* utils/csv2rec.c: Use xmalloc instead of malloc.
	Use xstrdup instead of strdup.
	Include xalloc.h.

	* utils/recutl.h: Likewise.

	* utils/recutl.c: Likewise.

	* utils/recset.c: Likewise.

	* utils/recins.c: Likewise.

	* utils/mdb2rec.c: Likewise.

2010-08-23  Jose E. Marchesi  <jemarch@gnu.org>

	mdb2rec: documentation and management of money fields.
	* utils/mdb2rec.c (process_table): Declare MONEY fields as real
	values.

	* doc/recutils.texi (mdb2rec Examples): Written.

2010-08-23  Jose E. Marchesi  <jemarch@gnu.org>

	rec-types: support for the 'field' type.
	* src/rec-types.c (REC_TYPE_FIELD_NAME): Defined.
	(REC_TYPE_FIELD_VALUE_RE): Defined in terms of REC_FNAME_RE.
	(REC_TYPE_NAME_RE): REC_TYPE_FIELD_NAME added.
	(REC_TYPE_FIELD_DESCR_RE): Defined.
	(REC_TYPE_DESCR_RE): REC_TYPE_FIELD_DESCR_RE added.
	(rec_type_kind_str): Added case for REC_TYPE_FIELD.
	(rec_type_check): Likewise.
	(rec_type_parse_type_kind): Likewise.
	(rec_type_check_field): New function.

	* src/rec.h (REC_FNAME_RE): Do not include anchors in regexp.

2010-08-23  Jose E. Marchesi  <jemarch@gnu.com>

	mdb2rec: specification of the table in the command line and the
	list-tables option.
	* doc/recutils.texi (mdb2rec Invocation): Document the
	--list-tables command line option.

	* utils/mdb2rec.c (process_mdb): Print the names of the tables,
	one per line, if mdb2rec_list_tables was specified.

	* doc/recutils.texi (mdb2rec Invocation): Document the usage of
	TABLE in the command line.

	* utils/mdb2rec.c: New global variable 'mdb2rec_mdb_table'.
	(parse_args): Set mdb2rec_mdb_table.
	(process_mdb): Process the requested table only if
	mdb2rec_mdb_table is initialized.

2010-08-22  Jose E. Marchesi  <jemarch@gnu.org>

	mdb2rec: emit field types for VARCHAR columns.
	* src/rec-types.c (rec_type_new): Finish the number[] string with
	a null value.

	* utils/mdb2rec.c (process_table): Process case when col_size > 0.

2010-08-22  Jose E. Marchesi  <jemarch@gnu.org>

	rec-int: warn on colling types only if the types are different.
	* src/rec-int.c (rec_int_check_field_type): Emit warning on
	colliding types only if the types are not equal.

	* src/rec-types.c (rec_type_equal_p): New function.

2010-08-22  Jose E. Marchesi  <jemarch@gnu.org>

	mdb2rec: use compound field names to reflect relationships between
	columns in the mdb tables.
	* utils/mdb2rec.c (get_field_name): New function.
	(process_table): Use 'get_field_name'.

2010-08-22  Jose E. Marchesi  <jemarch@gnu.org>

	manual: texinfo fixes.
	* doc/recutils.texi: mdb2rec is a chapter.
	Fix mdb2rec menu.

2010-08-22  Jose E. Marchesi  <jemarch@gnu.org>

	build: advertise third-party dependencies.
	* README-dev: Add a note on the dependencies on third party
	products.

2010-08-22  Jose E. Marchesi  <jemarch@gnu.org>

	Validation of record type names and minor fixes.
	* utils/mdb2rec.c (process_table): Use
	'rec_field_name_part_normalise'.

	* src/rec-field-name.c (rec_field_name_part_normalise): New
	function.

	* utils/mdb2rec.c (process_mdb): Configure libmdb to dump dates in
	ISO 8601 format.

	* src/rec-int.c (rec_int_check_descriptor): Check for the validity
	of the record set type.

	* utils/recutl.h (RECORD_SELECTION_ARGS_CASES): Check for the
	validity of the record types passed using -t.

	* src/rec.h: New function 'rec_field_name_str_p'.
	New function 'rec_field_name_part_str_p'.
	(REC_FNAME_PART_RE): Defined.
	(REC_FNAME_RE): Defined.

	* src/rec-field-name.c (rec_field_name_str_p): New function.
	(rec_field_name_part_str_p): New function.

	* doc/recutils.texi (Record Descriptors): Clarify that the record
	types have the same format restrictions that field names.

2010-08-22  Jose E. Marchesi  <jemarch@gnu.org>

	build: check for glib as a dependency to build mdb2rec.
	* configure.ac: Check for glib.

	* utils/mdb2rec.c: Include glib.h.

2010-08-22  Jose E. Marchesi  <jemarch@gnu.org>

	mdb2rec: normalize field names and new option to keep empty fields
	in the rec output.
	* doc/recutils.texi (mdb2rec Invocation): Document '-e'.

	* utils/mdb2rec.c (parse_args): Manage '-e'.
	(process_table): Normalize field names.

2010-08-21  Jose E. Marchesi  <jemarch@gnu.org>

	utils: new util mdb2rec.
	* src/rec-writer.c (rec_write_rset): Manage special case: empty
	record sets with a record descriptor.

	* src/rec.h: New function 'rec_field_new_str'.

	* src/rec-field.c (rec_field_new_str): Idem.

2010-08-20  Jose E. Marchesi  <jemarch@gnu.org>

	* configure.ac: Search for libmdbtools and define MDBLIBS.

	* utils/Makefile.am: Build mdb2rec.

	* utils/mdb2rec.c: New file.

2010-08-20  Jose E. Marchesi  <jemarch@gnu.org>

	csv2rec: several minor fixes.
	* utils/csv2rec.c (main): Make sure a rec database was created
	before to attempt to write it.

	* configure.ac: Emit a warning if libcsv is not found, noticing
	the user that csv2rec won't build.

2010-08-20  Jose E. Marchesi  <jemarch@gnu.org>

	Fixing of memory errors.
	* src/rec-sex.c (rec_sex_eval_node): Free the memory used by the
	compiled regexps.

	* utils/recfix.c (main): Free the memory used by the rec database.

	* utils/recsel.c (main): Likewise.

	* utils/recsel.c (recsel_process_data): Free the memory used by
	the rec writer.

	* src/rec-parser.c (rec_parser_buf_adjust): Realloc to adjust the
	memory used by the buffer.

	* src/rec-sex.l (rec_sex_lex_extract_name): Avoid an invalid write
	after the res[] buffer.

2010-08-20  Jose E. Marchesi  <jemarch@gnu.org>

	utils: new util csv2rec.
	* doc/recutils.texi (csv2rec): New chapter.

	* configure.ac: Check for libcsv and define the LIBCSV automake
	conditional accondingly.

	* utils/Makefile.am (bin_PROGRAMS): csv2rec added.
	(csv2rec_SOURCES): New variable.
	(csv2rec_LDADD): New variable.

	* utils/csv2rec.c: New file.

2010-08-20  Jose E. Marchesi  <jemarch@gnu.org>

	build: fix autogen.sh.
	* autogen.sh: Call libtoolize.
	Invoke automake with --add-missing.

2010-08-09  Jose E. Marchesi  <jemarch@gnu.org>

	Little script to get cyclomatic metrics from pmccabe.
	* build-aux/pmccabe2rec: New file.

2010-08-08  Jose E. Marchesi  <jemarch@gnu.org>

	Fix source in parse error messages in recinf.
	* utils/recinf.c (print_info_file): Specify the file name in parse
	errors instead of 'stdin'.

2010-08-08  Jose E. Marchesi  <jemarch@gnu.org>

	Generate information about tests in rec format and store it in
	TESTS.
	* README-dev: Added a note on updating the TESTS file when a test
	is added to the test suite.

	* TESTS (Test): New file, generated ith 'get-test-data'.

	* build-aux/get-test-data: New file.

	* torture/rec-record/rec-record-size.c: rec_record_size_001
	renamed to rec_record_size_empty.
	rec_record_size_002 renamed to rec_record_size_nonempty.
	(test_rec_record_size): Call to rec_record_size_empty and
	rec_record_size_nonempty.

	* torture/rec-record/rec-record-remove-field.c:
	rec_record_remove_field_001 renamed to
	rec_record_remove_field_existing.
	(test_rec_record_remove_field): Call to
	rec_record_remove_field_existing.

	* torture/rec-record/rec-record-new.c: rec_record_new_001 renamed
	to rec_record_new_and_destroy.

	* torture/rec-record/rec-record-insert-field.c:
	rec_record_insert_field_001 renamed to
	rec_record_insert_field_empty.
	rec_record_insert_field_002 renamed to
	rec_record_insert_field_nonempty.
	rec_record_insert_field_003 renamed to
	rec_record_insert_field_duplicated.
	(test_rec_record_insert_field): Call
	rec_record_insert_field_empty, rec_record_insert_field_nonempty
	and rec_record_insert_field_duplicated.

	* torture/rec-record/rec-record-field-p.c: rec_record_field_p_001
	renamed to rec_record_field_existing.
	rec_record_field_p_002 renamed to rec_record_field_nonexisting.

	* torture/rec-field/rec-field-value.c: rec_field_value_001 renamed
	to rec_field_value_empty.
	rec_field_value_002 renamed to rec_field_value_nonempty.
	(test_rec_field_value): Call to rec_field_value_empty and
	rec_field_value_nonempty.

	* torture/rec-field/rec-field-set-value.c: rec_field_set_value_001
	renamed to rec_field_set_value_empty.
	rec_field_set_value_002 renamed to rec_field_set_value_nonempty.
	(test_rec_field_set_value): Call to rec_field_set_value_empty and
	rec_field_set_value_nonempty.

	* torture/rec-field/rec-field-set-name.c: rec_field_set_name_001
	renamed to rec_field_set_name_empty.
	rec_field_set_name_002 renamed to rec_field_set_name_nonempty.
	(test_rec_field_set_name): Call to rec_field_set_name_empty and
	rec_field_set_name_nonempty.

	* torture/rec-field/rec-field-name.c: rec_field_name_001 renamed
	to rec_field_name_empty.
	rec_field_name_002 renamed to rec_field_name_nonempty.
	(test_rec_field_name): Call to 'rec_field_name_empty' and
	'rec_field_name_nonempty'.
	Comments reformatted to contain rec data.

	* torture/rec-field/rec-field-dup.c: rec_field_dup_001 renamed to
	rec_field_dup_empty.
	rec_field_dup_002 renamed to rec_field_dup_nonempty.
	(test_rec_field_dup): Call to 'rec_field_dup_empty' and
	'rec_field_dup_nonempty'.
	Comments reformated to contain rec data.

2010-08-07  Jose E. Marchesi  <jemarch@gnu.org>

	Import the gnulib gettext module.
	* 'gettext' gnulib module imported.

2010-08-06  Jose E. Marchesi  <jemarch@gnu.org>

	Minor fixes in documentation.
	* src/rec-int.c (rec_int_check_field_type): Out to date comment
	removed.

	* doc/recutils.texi (Field Types): New chapter.
	(Escalar types): New section.
	(String types): New section.
	(Enumerated types): New section.
	(Time related types): New section.
	(Selection Expressions): New section.

2010-08-05  Jose E. Marchesi  <jemarch@gnu.org>

	Assure proper exit values when redirecting output and some common
	facilities in recutl.c
	* utils/recset.c (recset_parse_args): Use 'recutl_fatal' and
	'recutl_error'.
	(main): Use 'recutl_init'.

	* utils/recins.c (recins_insert_record): Use 'recutl_error'.
	(main): Use 'recutl_init'.

	* utils/recinf.c (main): Use 'recutl_init'.

	* utils/recfix.c (main): Use 'recutl_init'.

	* utils/recdel.c (recdel_delete_records): Use 'recutl_fatal'.
	(recdel_delete_records): Likewise.
	(recdel_parse_args): Likewise.
	(main): Use 'recutl_init'.

	* utils/recsel.c (main): Use 'recutl_init'.

	* utils/recutl.c (recutl_error): New function.

	* utils/recsel.c (recsel_parse_args): Use 'recutl_fatal'.
	(recsel_parse_args): Likewise.
	(recsel_process_data): Use 'recutl_error'.

	* utils/recutl.c: Include 'closeout.h'.
	(recutl_init): New function.
	(recutl_init): Initialize the global variable 'program_name' with
	'util_name'.
	(recutl_init): Install the 'close_stdout' handler to be executed
	upon exit.
	(recutl_fini): New function.
	(recutl_fatal): New function.
	Include stdarg.

	* Module 'closeout' imported from gnulib.

2010-08-05  Jose E. Marchesi  <jemarch@gnu.org>

	* README-dev: Imported and adapted from GNU hello.

	* NEWS: Likewise.

	* README: Rephrased to follow the GNU hello style.

	* configure.ac: Invoke AC_PROG_YACC.

	* autogen.sh: Imported and adapted from GNU hello.

2010-08-02  Jose E. Marchesi  <jemarch@gnu.org>

	lib+utils: check the values returned by malloc.
	* src/rec-field.c (rec_field_set_location): Check for the return
	value of 'malloc'.

	* src/rec-parser.c (rec_parser_perror): Likewise.

	* src/rec-parser.c (rec_parse_field_name_str): Likewise.

	* src/rec-record.c (rec_record_set_location): Likewise.

	* utils/recins.c (recins_parse_args): Likewise.

	* utils/recutl.c (recutl_write_db_to_file): Likewise.

	* src/rec-fex.c (rec_fex_check): Emit error message only if there
	is enough memory to build the message.
	(rec_fex_parse_str_simple): Check for the return value of
	'malloc'.
	(rec_fex_parse_str_subscripts): Likewise.
	(rec_fex_parse_elem): Likewise.

2010-08-01  Jose E. Marchesi  <jemarch@gnu.org>

	recutl: avoid printing spurious newline characters when -P or -R
	is used.
	* utils/recutl.c (recutl_eval_field_expression): New variable
	'written_field'.
	(recutl_eval_field_expression): Add a newline to a sequence of
	field values only if some field was actually written.

	rec-record: Tiny improvement in an algorithm.
	* src/rec-record.c (rec_record_get_field_by_name): Don't return
	from the middle of the function.  Use a variable and break
	instead.

	recsel: allow dashes in field names when checking the field
	expressions.
	* src/rec-fex.c (rec_fex_check): Allow dashes '-' in field names
	in field expressions.

	recsel: avoid a segmentation fault while printing record descriptors.
	* utils/recsel.c (recsel_process_data): Test for NULL before
	printing the record descriptor of a record set.  Reported by Kai
	via savannah.

2010-07-31  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix distcheck: linking tests in torture/.
	* torture/Makefile.am: Simplify.  Use relative path to librec.la
	so dependencies are tracked correctly and distcheck works.

2010-07-31  Jose E. Marchesi  <jemarch@gnu.org>

	Information for the Free Software Directory added in FSD.
	* FSD (Description): New file.

	Make git to ignore some more generated files.
	* .gitignore: Ignore doc/recutils.aux, doc/recutils.cp, doc/recutils.cps,
	doc/recutils.fn, doc/recutils.fns, doc/recutils.ky,
	doc/recutils.log, doc/recutils.pg,
	doc/recutils.toc, doc/recutils.tp, doc/recutils.vr and
	doc/recutils.vrs.
	Ignore lib/alloca.h, lib/c++defs.h, lib/stdlib.h, lib/string.h,
	lib/sys, lib/time.h, lib/warn-on-use.h, lib/wchar.h.
	Ignore torture/test

2010-07-30  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Simplify makefile rules.
	* utils/Makefile.am: Simplify.
	* src/Makefile.am: Likewise.

	Typos and formatting nits.
	* configure.ac: Fix typo.
	* doc/recutils.texi: Fix typo, add some @noindents.

2010-07-30  Jose E. Marchesi  <jemarch@gnu.org>

	* gendocs gnulib module imported.

2010-07-25  Jose E. Marchesi  <jemarch@gnu.org>

	Manual: misc improvements.
	* doc/recutils.texi: Misc improvements.

2010-07-25  Jose E. Marchesi  <jemarch@gnu.org>

	GHM 2010 slides.
	* doc/recutils.ept: New file.

2010-07-23  Jose E. Marchesi  <jemarch@gnu.org>

	Parametrize the name of the fields in the issues.
	* tasktool: New variables containing the names of the issue
	fields: tt_db_field_id, tt_db_field_summary, tt_db_field_type,
	tt_db_field_status, tt_db_field_originator, tt_db_field_assignee,
	tt_db_field_assigned, tt_db_field_component, tt_db_field_created,
	tt_db_field_note, tt_db_field_description.
	(tt_db_template): Use the variables described above.
	(tt_version): Likewise.
	(tt_version): Likewise.
	(tt_version): Likewise.
	(tt_supported_vcs): Likewise.
	(tt_supported_vcs): Likewise.

2010-07-23  Jose E. Marchesi  <jemarch@gnu.org>

	Avoid build dependency with bison.
	* lib/getdate.c: New file.

	* build-aux/.gitignore: Ignore ylwrap.

2010-07-23  Jose E. Marchesi  <jemarch@gnu.org>

	Integrate getdate documentation in the manual.
	* doc/recutils.texi (Top): Entry for the "Date input formats"
	chapter added.
	Include 'getdate.texi'.
	FSF copyright added in the manual.

2010-07-23  Jose E. Marchesi  <jemarch@gnu.org>

	Implementation of the 'date' field type.
	* tasktool (tt_db_template): Declare Date as a field of type
	'date'.

	* src/Makefile.am (librec_la_LIBADD): LIB_CLOCK_GETTIME added to
	find the definition of 'clock_gettime'.

	* src/rec-types.c (rec_type_check_date): Implemented using
	'get_date'.
	Include getdate.h.

2010-07-23  Jose E. Marchesi  <jemarch@gnu.org>

	Gnulib work.
	* Gnulib updated.

	* Module 'getdate' imported.

2010-07-18  Jose E. Marchesi  <jemarch@gnu.org>

	Localization of fields and better error reporting.
	* src/rec-int.c (rec_int_check_record_types): Improve error
	localization.

	* utils/recutl.c (recutl_parse_db_from_file): Report parse errors.

	* src/rec-int.c (rec_int_check_field_type): Use localization
	information in the warning.

	* src/rec-parser.c (rec_parse_field): Annotate the fields with
	their location in the source file.

	* src/rec-field.c (rec_field_destroy): Free memory occupied by the
	location properties upon field destruction.

	* src/rec.h: New functions 'rec_field_source',
	'rec_field_set_source', 'rec_field_location',
	'rec_field_set_location' and 'rec_field_location_str'.

	* src/rec-field.c: Implementation of the functions listed above.

2010-07-18  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-int.c: Copyright notification added.

2010-07-15  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-field-name.c (rec_field_name_ref_p): New function.

	* src/rec-int.c (rec_int_check_rset): Pass 'db' to
	'rec_rset_elem_record'.

	* utils/recins.c (recins_insert_record): Pass the database
	containing the rset containing the record to 'rec_int_check_rset'.

	* utils/recset.c (recset_process_actions): Likewise.

	* src/rec.h: 'rec_int_check_rset' gets a parameter (optional using
	NULL) 'db'.
	Likewise for 'rec_int_check_record'.
	Likewise for 'rec_int_check_field_type'.

	* src/rec-int.c (rec_int_check_rset): Likewise.

2010-07-15  Jose E. Marchesi  <jemarch@gnu.org>

	New function re_int_check_db to check the integrity of a database.
	* utils/recfix.c (recfix_process_data): Use 'rec_int_check_db'.

	* src/rec-int.h: New function 'rec_int_check_db'.

	* src/rec-int.c (rec_int_check_db): New function.

2010-07-15  Jose E. Marchesi  <jemarch@gnu.org>

	Relocate data integrity related code to rec-int.c.
	* src/rec-int.c (rec_int_check_field_type): Use
	'rec_rset_get_type_reg' to get the type registry of records sets
	instead of accessing the data structure.

	* src/rec.h: New function 'rec_rset_get_type_reg'.

	* src/rec-rset.c (rec_rset_get_type_reg): New function.

	* src/Makefile.am (librec_la_SOURCES): 'rec-int.c' added.

	* utils/recfix.c (recfix_process_data): Use 'rec_int_check_rset'
	instead of 'rec_rset_check'.

	* utils/recins.c (recins_insert_record): Likewise.

	* utils/recset.c (recset_process_actions): Likewise.

	* src/rec-int.c: New file.

	* src/rec.h: 'rec_rset_check' renamed to 'rec_int_check_rset'.
	'rec_rset_check_record' renamed to 'rec_int_check_record'.
	'rec_rset_check_field_type' renamed to 'rec_int_check_field_type'.

2010-07-14  Jose E. Marchesi  <jemarch@gnu.com>

	Change -v|--verbose in recinf for -d|--descriptor.
	* utils/recinf.c (COMMON_ARGS): VERBOSE_ARG renamed to
	DESCRIPTOR_ARG.
	(print_info_file): Process the -d|--descriptor command line
	argument instead of -v|--verbose.

2010-07-14  Jose E. Marchesi  <jemarch@gnu.org>

	Support for the --type option in recinf.
	* utils/recinf.c (COMMON_ARGS): New argument 'TYPE_ARG'.
	(GNU_longOptions): New argument '--type'.
	(recutl_help_msg): Doc for the new argument 'type'.
	(recinf_type): New global variable.
	(print_info_file): If a type was specified at command line, skip
	records not having that type.

2010-07-14  Jose E. Marchesi  <jemarch@gnu.org>

	Keep the descriptor relative position when inserting records in an
	empty record set.
	* utils/recins.c (recins_insert_record): Take into account the
	descriptor relative position in the record set when inserting a
	record into an empty rset.

2010-07-14  Jose E. Marchesi  <jemarch@gnu.org>

	Little fixes in tasktool.
	* tasktool (tt_db_show_task): Use a selection expression implying
	that Id is an integer, not a string.
	(tt_supported_vcs): Typo fixed.

	* tasktool (tt_db_task_p): Likewise.

2010-07-14  Jose E. Marchesi  <jemarch@gnu.org>

	Fix a regression in the definition of the REC_TYPE_DESCR_RE
	regexp.
	* src/rec-types.c (REC_TYPE_DESCR_RE): Regexp fixed.

2010-07-13  Jose E. Marchesi  <jemarch@gnu.org>

	Support for the type 'field' removed.
	* src/rec-types.c: Data types, constants and functions removed for
	the 'field' type.

2010-07-13  Jose E. Marchesi  <jemarch@gnu.org>

	Bug preventing empty fields without a beginning space fixed.
	* src/rec-parser.c (rec_parse_field_name): If a newline is found
	terminating a field name then push it back to the input stream, so
	it will be part of the field value.

2010-07-13  Jose E. Marchesi  <jemarch@gnu.org>

	Keep information about the position of the record descriptor in a
	record set.
	* src/rec-rset.c (rec_rset_set_descriptor_pos): New function.
	(rec_rset_descriptor_pos): New function.
	(rec_rset_new): Initialize new->descriptor_pos to 0.
	(struct rec_rset_s): New field descriptor_pos.

	* src/rec.h: Prototypes for 'rec_rset_descriptor_pos' and
	'rec_rset_set_descriptor_pos'.

	* src/rec-parser.c (rec_parse_rset): New local variable to store
	the number of comments added to the record set.  In the special
	case where some comments are preceding the first record descriptor
	in the file, store the relative position of the descriptor in the
	record set using rec_rset_descriptor_pos.

	* src/rec-writer.c (rec_write_rset): Write the descriptor in its
	relative position into the record set.

2010-06-19  Jose E. Marchesi  <jemarch@gnu.org>

	* utils/recins.c: Help string improved.

2010-04-30  Jose E. Marchesi  <jemarch@gnu.org>

	* lisp/rec-mode.el (rec-count): New implementation based on
	'recsel'.

2010-04-28  Jose E. Marchesi  <jemarch@gnu.org>

	* .gitignore: Ignore /utils/recfix.

2010-04-22  Jose E. Marchesi  <jemarch@gnu.org>

	* utils/recset.c (recset_parse_args): Stop the program with an
	error code if an invalid option is specified in the command line.
	(recset_process_actions): SET action implemented.

2010-04-21  Jose E. Marchesi  <jemarch@gnu.org>

	* utils/recset.c: Help string completed with record selection
	options, fields selection options and actions.

	* doc/recutils.texi (Record Descriptors): Documentation for the
	record descriptor field '%order'.

2010-04-08  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-mset.c: Distribution terms added.

	* src/rec-mset.h: Likewise.

2010-04-07  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-mset.c (rec_mset_elem_next): Added the MSET parameter.
	Return the first element of the given type if ELEM is NULL.

2010-04-01  Jose E. Marchesi  <jemarch@gnu.org>

	* .gitignore: Ignore backup files.

2010-01-11  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-parser.c (rec_parse_field_name_str): New function.

2010-01-09  Jose E. Marchesi  <jemarch@gnu.org>

	* src/Makefile.am (librec_la_SOURCES): rec-sex.l added to the
	list.

	* src/rec-sex.y: New file.

	* src/rec-sex.l: New file.

2009-12-28  Jose E. Marchesi  <jemarch@gnu.org>

	* utils/recinf.h (HELP_ARG): New file.

	* utils/recinf.c: New file.

	* utils/Makefile.am (recinf_LDFLAGS): New file.

2009-12-23  Jose E. Marchesi  <jemarch@gnu.org>

	* lisp/rec-mode.el: New file.
	(rec-field-trim-value): New function.
	(rec-cmd-trim-field-value): New function.

2009-11-30  Jose E. Marchesi  <jemarch@gnu.org>

	* lisp/rec-mode.el (rec-beginning-of-record-pos): Don't signal an
	error if the buffer is empty.

2009-10-02  Jose E. Marchesi  <jemarch@gnu.org>

	* lisp/rec-mode.el: New file.

2009-10-01  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-record.c (rec_record_new): Allow duplicates.

2009-09-03  Jose E. Marchesi  <jemarch@gnu.org>

	* src/grec.h: Comments clarified.

2009-07-23  Jose E. Marchesi  <jemarch@gnu.org>

	* doc/fdl.texi: New file.

	* doc/gnurec.texi: New file.

2009-07-13  Jose E. Marchesi  <jemarch@gnu.org>

	* torture/runtests.c (main): Use CK_ENV instead of CK_VERBOSE in
	srunner_run_all.

	* Begin of the change log.

Copyright 2009, 2010, 2011 Jose E. Marchesi

Copying and distribution of this file, with or without modification, are
permitted in any medium without royalty provided the copyright notice
and this notice are preserved.
