2010-07-23  Jose E. Marchesi  <jemarch@gnu.org>

	Implementation of the 'date' field type.
	* tasktool (tt_db_template): Declare Date as a field of type
	'date'.

	* src/Makefile.am (librec_la_LIBADD): LIB_CLOCK_GETTIME added to
	find the definition of 'clock_gettime'.

	* src/rec-types.c (rec_type_check_date): Implemented using
	'get_date'.
	Include getdate.h.

2010-07-23  Jose E. Marchesi  <jemarch@gnu.org>

	Gnulib work.
	* Gnulib updated.

	* Module 'getdate' imported.

2010-07-18  Jose E. Marchesi  <jemarch@gnu.org>

	Localization of fields and better error reporting.
	* src/rec-int.c (rec_int_check_record_types): Improve error
	localization.

	* utils/recutl.c (recutl_parse_db_from_file): Report parse errors.

	* src/rec-int.c (rec_int_check_field_type): Use localization
	information in the warning.

	* src/rec-parser.c (rec_parse_field): Annotate the fields with
	their location in the source file.

	* src/rec-field.c (rec_field_destroy): Free memory occupied by the
	location properties upon field destruction.

	* src/rec.h: New functions 'rec_field_source',
	'rec_field_set_source', 'rec_field_location',
	'rec_field_set_location' and 'rec_field_location_str'.

	* src/rec-field.c: Implementation of the functions listed above.

2010-07-18  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-int.c: Copyright notification added.

2010-07-15  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-field-name.c (rec_field_name_ref_p): New function.

	* src/rec-int.c (rec_int_check_rset): Pass 'db' to
	'rec_rset_elem_record'.

	* utils/recins.c (recins_insert_record): Pass the database
	containing the rset containing the record to 'rec_int_check_rset'.

	* utils/recset.c (recset_process_actions): Likewise.

	* src/rec.h: 'rec_int_check_rset' gets a parameter (optional using
	NULL) 'db'.
	Likewise for 'rec_int_check_record'.
	Likewise for 'rec_int_check_field_type'.

	* src/rec-int.c (rec_int_check_rset): Likewise.

2010-07-15  Jose E. Marchesi  <jemarch@gnu.org>

	New function re_int_check_db to check the integrity of a database.
	* utils/recfix.c (recfix_process_data): Use 'rec_int_check_db'.

	* src/rec-int.h: New function 'rec_int_check_db'.

	* src/rec-int.c (rec_int_check_db): New function.

2010-07-15  Jose E. Marchesi  <jemarch@gnu.org>

	Relocate data integrity related code to rec-int.c.
	* src/rec-int.c (rec_int_check_field_type): Use
	'rec_rset_get_type_reg' to get the type registry of records sets
	instead of accessing the data structure.

	* src/rec.h: New function 'rec_rset_get_type_reg'.

	* src/rec-rset.c (rec_rset_get_type_reg): New function.

	* src/Makefile.am (librec_la_SOURCES): 'rec-int.c' added.

	* utils/recfix.c (recfix_process_data): Use 'rec_int_check_rset'
	instead of 'rec_rset_check'.

	* utils/recins.c (recins_insert_record): Likewise.

	* utils/recset.c (recset_process_actions): Likewise.

	* src/rec-int.c: New file.

	* src/rec.h: 'rec_rset_check' renamed to 'rec_int_check_rset'.
	'rec_rset_check_record' renamed to 'rec_int_check_record'.
	'rec_rset_check_field_type' renamed to 'rec_int_check_field_type'.

2010-07-14  Jose E. Marchesi  <jemarch@gnu.com>

	Change -v|--verbose in recinf for -d|--descriptor.
	* utils/recinf.c (COMMON_ARGS): VERBOSE_ARG renamed to
	DESCRIPTOR_ARG.
	(print_info_file): Process the -d|--descriptor command line
	argument instead of -v|--verbose.

2010-07-14  Jose E. Marchesi  <jemarch@gnu.org>

	Support for the --type option in recinf.
	* utils/recinf.c (COMMON_ARGS): New argument 'TYPE_ARG'.
	(GNU_longOptions): New argument '--type'.
	(recutl_help_msg): Doc for the new argument 'type'.
	(recinf_type): New global variable.
	(print_info_file): If a type was specified at command line, skip
	records not having that type.

2010-07-14  Jose E. Marchesi  <jemarch@gnu.org>

	Keep the descriptor relative position when inserting records in an
	empty record set.
	* utils/recins.c (recins_insert_record): Take into account the
	descriptor relative position in the record set when inserting a
	record into an empty rset.

2010-07-14  Jose E. Marchesi  <jco@terma.com>

	Little fixes in tasktool.
	* tasktool (tt_db_show_task): Use a selection expression implying
	that Id is an integer, not a string.
	(tt_supported_vcs): Typo fixed.

	* tasktool (tt_db_task_p): Likewise.

2010-07-14  Jose E. Marchesi  <jemarch@gnu.org>

	Fix a regression in the definition of the REC_TYPE_DESCR_RE
	regexp.
	* src/rec-types.c (REC_TYPE_DESCR_RE): Regexp fixed.

2010-07-13  Jose E. Marchesi  <jemarch@gnu.org>

	Support for the type 'field' removed.
	* src/rec-types.c: Data types, constants and functions removed for
	the 'field' type.

2010-07-13  Jose E. Marchesi  <jemarch@gnu.org>

	Bug preventing empty fields without a beginning space fixed.
	* src/rec-parser.c (rec_parse_field_name): If a newline is found
	terminating a field name then push it back to the input stream, so
	it will be part of the field value.

2010-07-13  Jose E. Marchesi  <jemarch@gnu.org>

	Keep information about the position of the record descriptor in a
	record set.
	* src/rec-rset.c (rec_rset_set_descriptor_pos): New function.
	(rec_rset_descriptor_pos): New function.
	(rec_rset_new): Initialize new->descriptor_pos to 0.
	(struct rec_rset_s): New field descriptor_pos.

	* src/rec.h: Prototypes for 'rec_rset_descriptor_pos' and
	'rec_rset_set_descriptor_pos'.

	* src/rec-parser.c (rec_parse_rset): New local variable to store
	the number of comments added to the record set.  In the special
	case where some comments are preceding the first record descriptor
	in the file, store the relative position of the descriptor in the
	record set using rec_rset_descriptor_pos.

	* src/rec-writer.c (rec_write_rset): Write the descriptor in its
	relative position into the record set.

2010-06-19  Jose E. Marchesi  <jemarch@gnu.org>

	* utils/recins.c: Help string improved.

2010-04-30  Jose E. Marchesi  <jco@terma.com>

	* lisp/rec-mode.el (rec-count): New implementation based on
	'recsel'.

2010-04-28  Jose E. Marchesi  <jemarch@gnu.org>

	* .gitignore: Ignore /utils/recfix.

2010-04-22  Jose E. Marchesi  <jco@terma.com>

	* utils/recset.c (recset_parse_args): Stop the program with an
	error code if an invalid option is specified in the command line.
	(recset_process_actions): SET action implemented.

2010-04-21  Jose E. Marchesi  <jemarch@gnu.org>

	* utils/recset.c: Help string completed with record selection
	options, fields selection options and actions.

	* doc/recutils.texi (Record Descriptors): Documentation for the
	record descriptor field '%order'.

2010-04-08  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-mset.c: Distribution terms added.

	* src/rec-mset.h: Likewise.

2010-04-07  Jose E. Marchesi  <jco@terma.com>

	* src/rec-mset.c (rec_mset_elem_next): Added the MSET parameter.
	Return the first element of the given type if ELEM is NULL.

2010-04-01  Jose E. Marchesi  <jemarch@gnu.org>

	* .gitignore: Ignore backup files.

2010-01-11  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-parser.c (rec_parse_field_name_str): New function.

2010-01-09  Jose E. Marchesi  <jemarch@gnu.org>

	* src/Makefile.am (librec_la_SOURCES): rec-sex.l added to the
	list.

	* src/rec-sex.y: New file.

	* src/rec-sex.l: New file.

2009-12-28  Jose E. Marchesi  <jemarch@gnu.org>

	* utils/recinf.h (HELP_ARG): New file.

	* utils/recinf.c: New file.

	* utils/Makefile.am (recinf_LDFLAGS): New file.

2009-12-23  Jose E. Marchesi  <jemarch@gnu.org>

	* lisp/rec-mode.el: New file.
	(rec-field-trim-value): New function.
	(rec-cmd-trim-field-value): New function.

2009-11-30  Jose E. Marchesi  <jemarch@gnu.org>

	* lisp/rec-mode.el (rec-beginning-of-record-pos): Don't signal an
	error if the buffer is empty.

2009-10-02  Jose E. Marchesi  <jemarch@gnu.org>

	* lisp/rec-mode.el: New file.

2009-10-01  Jose E. Marchesi  <jemarch@gnu.org>

	* src/rec-record.c (rec_record_new): Allow duplicates.

2009-09-03  Jose E. Marchesi  <jemarch@gnu.org>

	* src/grec.h: Comments clarified.

2009-07-23  Jose E. Marchesi  <jemarch@gnu.org>

	* doc/fdl.texi: New file.

	* doc/gnurec.texi: New file.

2009-07-13  Jose E. Marchesi  <jemarch@gnu.org>

	* torture/runtests.c (main): Use CK_ENV instead of CK_VERBOSE in
	srunner_run_all.

	* Begin of the change log.

